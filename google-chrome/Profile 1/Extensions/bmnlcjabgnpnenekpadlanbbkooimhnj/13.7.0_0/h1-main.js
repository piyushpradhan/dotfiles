!function(e){function t(t){for(var r,i,u=t[0],s=t[1],c=t[2],d=0,f=[];d<u.length;d++)i=u[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var s=n[u];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={3:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var u=window.webpackJsonp=window.webpackJsonp||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var l=s;a.push([1364,0,1]),n()}({1021:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=m(regeneratorRuntime.mark((function e(){var t,n,r,o,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getInfo();case 2:return t=e.sent,n=t.id,e.prev=4,e.next=7,Promise.all([(0,y.isObservationFeatureEnabled)(),w(n,b.storeId)]);case 7:return r=e.sent,o=i(r,2),a=o[0],u=o[1],e.abrupt("return",a&&u&&u.length>0);case 14:return e.prev=14,e.t0=e.catch(4),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(){return r.apply(this,arguments)}),s=(o=m(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O){e.next=2;break}return e.abrupt("return");case 2:if((0,y.isObservationFeatureEnabled)()){e.next=5;break}return e.abrupt("return");case 5:new v.CheckoutObservationContentManager({messages:d.default,executeScript:p.default,scriptPath:"pageScripts/checkoutObservation.js",allowedOrigins:[window.location.origin],store:b}).start(),d.default.send(h.MESSAGE_ACTIONS.ENABLE_BG_SERVER,{storeId:b.storeId},{background:!0}).catch((function(e){l.default.debug("[CheckoutObservation] Failed to start process: "+JSON.stringify(e))})),O=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),c=(a=m(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.isObservationFeatureEnabled)();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:d.default.addListener("stores:pageview",function(){var e=m(regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.id,a=r.sessionId,b={storeId:o,sessionId:a,pageTitle:_(),pageURL:E()},e.next=4,u(o);case 4:e.sent&&s();case 6:case"end":return e.stop()}}),e,t)})));return function(t,n){return e.apply(this,arguments)}}()),d.default.addListener("offers:action",function(){var e=m(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r&&r.action,e.next="offerActivated"===e.t0?3:8;break;case 3:return e.next=5,u();case 5:return e.sent&&s(),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:case"end":return e.stop()}}),e,t)})));return function(t,n){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),l=g(n(9)),d=g(n(8)),f=g(n(14)),p=g(n(477)),v=n(2420),h=n(503),y=n(2460);function g(e){return e&&e.__esModule?e:{default:e}}function m(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var b={};function _(){try{return document.title}catch(e){return null}}function E(){try{return window.location.href}catch(e){return null}}function w(e,t){return d.default.send("offers:action",{action:"getProductOfferActivations",data:{userId:e,storeId:t,useCache:!0}},{background:!0})}var O=!1;t.default={start:c}},125:function(e,t,n){const r=n(508),{MAX_LENGTH:o,MAX_SAFE_INTEGER:a}=n(507),{re:i,t:u}=n(321),{compareIdentifiers:s}=n(922);class c{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof c){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?i[u.LOOSE]:i[u.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<a)return t}return e}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof c)){if("string"==typeof e&&e===this.version)return 0;e=new c(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof c||(e=new c(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(e){if(e instanceof c||(e=new c(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++t)}compareBuild(e){e instanceof c||(e=new c(e,this.options));let t=0;do{const n=this.build[t],o=e.build[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=c},1297:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2422),t),o(n(2423),t),o(n(2424),t)},1298:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBackgroundClient=b;var r=g(n(8)),o=n(2464),a=g(n(9)),i=g(n(916)),u=n(2465),s=n(2467),c=n(1301),l=n(2476),d=n(1302),f=n(2477),p=n(1300),v=n(2478),h=n(2479),y=n(2480);function g(e){return e&&e.__esModule?e:{default:e}}var m=void 0;function b(){var e,t,n;return m||(e=u.LoggingDriverExtension.createService({honeyLogger:a.default}),t=new f.BackgroundClient({transport:new v.HoneyMessagingTransportClient({id:"Content <-> Background"}),defaultTimeoutMilliseconds:1e3,options:{log:e}}),n={postMessage:function(e){return r.default.send(e.meta.action,e.data,{ignoreResponse:!1,background:!0})}},t.connect(n),m=t),m}t.default={start:function(){var e;e=i.default.events.paypalFrameDetected(),b().invoke(p.BackgroundAction.FrameIds).then((function(t){t&&t.paypal&&!t.paypal.frameId||e.next(t.paypal)})),r.default.addListener(o.honeyMessagesEvents.PAYPAL_IFRAME_DETECTED,(function(t,n){e.next(n)}))},initialize:function(){var e=u.LoggingDriverExtension.createService({honeyLogger:a.default});e.debug("[CheckoutPaypal] Content script initialized");var t=b(),n=new URL("https://cdn.joinhoney.com/honey-checkout/index.html"),r=new c.HoneyCheckoutServer({transport:new h.FrameTransportServer({allowedOrigins:[n.origin]})}),o=new l.PayPalCheckoutClient({transport:new y.FrameTransportClient({id:"Content <-> Paypal Relay",allowedOrigin:"https://www.paypal.com"}),defaultTimeoutMilliseconds:1e3,options:{log:e}}),i=new d.DiscoveryRelayServer({transport:new h.FrameTransportServer({allowedOrigins:[n.origin,"https://www.paypal.com"]})});return new s.ContentCoordinator({log:e,backgroundClient:t,honeyCheckoutServer:r,paypalCheckoutClient:o,discoveryRelayServer:i,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"})},getBackgroundClient:b}},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var r=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=r},1300:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundServer=t.BackgroundAction=void 0;var a=n(320);!function(e){e.FrameIds="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIds",e.FrameIdsRemove="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/frameIdsRemove",e.ExecuteScript="87f7056f-b146-4a3f-8ef5-e1180a94932a/background/executeScript"}(t.BackgroundAction||(t.BackgroundAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.BackgroundServer=i},1301:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyCheckoutServer=t.HoneyCheckoutAction=void 0;var a=n(320);!function(e){e.PayPalCreateOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/create",e.PayPalApproveOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/approve",e.PayPalCancelOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/cancel",e.PayPalErrorOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/error",e.PayPalVersion="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/version",e.PayPalConfig="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/config",e.HoneyCheckoutIFrameReady="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/ready",e.HoneyCheckoutIFrameComplete="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/complete"}(t.HoneyCheckoutAction||(t.HoneyCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.HoneyCheckoutServer=i},1302:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DiscoveryRelayServer=t.DiscoveryRelayAction=void 0;var a=n(320);!function(e){e.DiscoveredPayPal="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/paypal",e.DiscoveredHoney="9ac7ac40-5417-4a34-a35c-acb253c4bb47/checkout/relay/discovery/honey",e.Deployed="9ac7ac40-5417-4a34-a35c-acb253c4bb47/deployed"}(t.DiscoveryRelayAction||(t.DiscoveryRelayAction={}));var i=function(e){function t(t){var n=t.transport;return e.call(this,{transport:n})||this}return o(t,e),t}(a.Server);t.DiscoveryRelayServer=i},1304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i,u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(r=k(regeneratorRuntime.mark((function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.waitForElement(t,{timeout:o});case 2:return n=e.sent,r=A(n.text()),e.abrupt("return",m.default.cleanPrice(r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),c=(o=k(regeneratorRuntime.mark((function e(t,n,r){var o,a,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.MutationObserver){e.next=2;break}return e.abrupt("return");case 2:return o=new MutationObserver(k(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return n=e.sent,e.next=5,P.default.getFeatureFlag("gift_cards_use_remote_iframe");case 5:if(!e.sent){e.next=10;break}return o=E.default.getCurrent(),e.next=10,I.default.request(T.types.giftCardsCartPriceChange,{cartPrice:n,tabId:o.id,prioritized:r,storeId:t.id,storeName:t.name});case 10:case"end":return e.stop()}}),e,u)})))),e.next=5,m.default.waitForElement(n,{timeout:3e3});case 5:return e.prev=5,e.next=8,P.default.getFeatureFlag("gift_card_deals_observe_body_for_total");case 8:a=e.sent,i=a?document.body:document.querySelector(n),o.observe(i,{characterData:!0,attributes:!1,childList:!0,subtree:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),y.default.error("Error attaching mutation observer for store "+t.id+" with selector "+n);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t,n){return o.apply(this,arguments)}),l=(a=k(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([S.default.getReminder(t),g.default.get("honey-pay-now:gift-card-deal-reminder:"+t).catch((function(){return{}}))]);case 2:return n=e.sent,r=u(n,2),o=r[0],a=r[1].isGiftCardTipEngaged,e.abrupt("return",!(!o&&!a));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),d=(i=k(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=E.default.getCurrent(),e.next=3,l(t.id);case 3:return o=e.sent,e.next=6,I.default.request(T.types.giftCardsFindSavingsClosed,{cartPrice:n,tabId:r.id,prioritized:!0,storeId:t.id,storeName:t.name,isReminderSet:o});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)});t.getCartPrice=N;var f=R(n(0)),p=R(n(46)),v=R(n(493)),h=R(n(8)),y=R(n(9)),g=R(n(42)),m=R(n(15)),b=R(n(21)),_=R(n(13)),E=R(n(31)),w=R(n(37)),O=R(n(2484)),S=R(n(1293)),x=n(494),P=R(n(106)),T=n(1305),I=R(T),C=R(n(2485));function R(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var L,M=/[\d+][,.\d+]+/;function A(e){var t=e&&e.match(M);if(t)return t[0]}function N(e){return s(e.metadata.honeyPayCartPriceSelector)}function j(e){[].forEach((function(t){return h.default.send("honey-pay-now:action:"+t,{action:x.HONEY_PAY_NOW_MESSAGES.SET_CART_PRICE,data:{cartPrice:e}},{background:!0})}))}function D(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.querySelector("#"+e);if(!r){(r=document.createElement("div")).id=e,r.style.cssText=n;var o=document.querySelector(t);o.appendChild(r)}return r}("honeyPayNowContainer");p.default.render(f.default.createElement(C.default,{data:e}),t)}function F(e){var t=e.allPageTypes;return O.default.isPaymentsViewPrioritized(t)}function U(){var e=this;h.default.addListener("find-savings:complete",k(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,N(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,P.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,d(n,r);case 16:case"end":return e.stop()}}),t,e)}))))}function B(){var e=this;return Promise.all([new Promise((function(e){I.default.addListener(T.types.giftCardsReady,(function(){return e()}))})),new Promise((function(e){h.default.addListener("find-savings:closed",(function(){return e()}))}))]).then(k(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,N(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,P.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,d(n,r);case 16:case"end":return e.stop()}}),t,e)})))).catch((function(){return""}))}h.default.addListener("current:product",(L=k(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,u,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.next=3,E.default.getCurrent();case 3:o=e.sent,a=o.id,i=r.partialObservation,u=i.price,s=i.url,c=r.productId,l=(0,v.default)(u).value(),g.default.set("honey-pay-now:product:"+s+":"+a,{productPrice:l,productId:c});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return L.apply(this,arguments)})),h.default.addListener("honey-pay-now:action:ui",(function(e,t){switch(t&&t.action){case x.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_CARD_VISIBILITY:return b.default.open({pathname:"/honey-pay-now-card",query:{},state:{cardData:t.data.cardData},force:!0,feature:"honey-pay-now-card",surface:"popup"});case x.HONEY_PAY_NOW_MESSAGES.OPEN_PAY_NOW_AUTOPOP:return b.default.open({pathname:"/honey-pay-now-autopop",query:{},state:t.data,force:!0,feature:"honey-pay-now-autopop",surface:"popup"});default:throw new InvalidParametersError("Invalid action")}}));var H,G=0;h.default.addListener("pageDetected:PAYMENTS",(H=k(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,u,s,d=n.data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=Date.now())-G<5e3)){e.next=5;break}return e.abrupt("return");case 5:G=r;case 6:return e.next=8,_.default.getCurrent();case 8:if((o=e.sent).id){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,N(o);case 13:if(a=e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,P.default.getFeatureFlag("gift_cards_use_remote_iframe");case 18:if(!e.sent){e.next=34;break}return e.next=22,F(d);case 22:return i=e.sent,e.next=25,w.default.getDeviceId();case 25:return u=e.sent,e.next=28,l(o.id);case 28:s=e.sent,B(),U(),j(a),c(o,o.metadata.honeyPayCartPriceSelector,i);try{D({storeId:o.id,deviceId:u,browser:"ch",extVersion:"13.7.0",cartPrice:a,prioritized:i,isReminderSet:s})}catch(e){y.default.error("Error loading Honey Pay iframe: "+e)}case 34:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return H.apply(this,arguments)})),t.default={}},1305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.types=void 0;var r,o=n(1256),a=(r=o)&&r.__esModule?r:{default:r};var i=t.types={extensionAuth:"extensionAuth",extensionRemoveIFrame:"extensionRemoveIFrame",extensionSendSDataEvent:"extensionSendSDataEvent",extensionUpdateStyles:"extensionUpdateStyles",extensionExperimentsGetVariant:"extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"extensionExperimentsTrackImpression",extensionGetUserABGroup:"extensionGetUserABGroup",extensionGetI18nCountryCode:"extensionGetI18nCountryCode",extensionGetI18nMessage:"extensionGetI18nMessage",extensionSetGiftCardsEnabledForUser:"extensionSetGiftCardsEnabledForUser",extensionOpenLoginPrompt:"extensionOpenLoginPrompt",extensionHideContentUI:"extensionHideContentUI",extensionGetCartPrice:"extensionGetCartPrice",extensionSetIFrameAttribute:"extensionSetIFrameAttribute",extensionRemoveIFrameAttribute:"extensionRemoveIFrameAttribute",extensionSetHoneyStorageItem:"extensionSetHoneyStorageItem",extensionGetHoneyStorageItem:"extensionGetHoneyStorageItem",extensionRemoveHoneyStorageItem:"extensionRemoveHoneyStorageItem",extensionSetWindowLocalStorageItem:"extensionSetWindowLocalStorageItem",extensionGetWindowLocalStorageItem:"extensionGetWindowLocalStorageItem",extensionRemoveWindowLocalStorageItem:"extensionRemoveWindowLocalStorageItem",extensionGQLQuery:"extensionGQLQuery",extensionGQLMutation:"extensionGQLMutation",giftCardsInit:"giftCardsInit",giftCardsReady:"giftCardsReady",giftCardsUserUpdate:"giftCardsUserUpdate",giftCardsCartPriceChange:"giftCardsCartPriceChange",giftCardsUserLoggedIn:"giftCardsUserLoggedIn",giftCardsFindSavingsClosed:"giftCardsFindSavingsClosed"},u=(0,a.default)({types:i,enableLogging:!1,clientName:"extension"});t.default=u},1308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i,u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=(r=U(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.default)();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:n=e.t0,r=n.productId,o=void 0===r?null:r,a=n.parentId,i=void 0===a?null:a,u=n.variantId,c=void 0===u?null:u,p.default.sendEvent("tip004034",s({},t,{productId:o,parentId:i,variantId:c}));case 8:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),l=(o=U(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.sendEvent("tip004034",t);case 2:return e.next=4,(0,T.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:n=e.t0,r=n.productId,o=void 0===r?null:r,a=n.parentId,i=void 0===a?null:a,u=n.variantId,c=void 0===u?null:u,p.default.sendEvent("tip004034",s({},t,{productId:o,parentId:i,variantId:c}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),d=(a=U(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q){e.next=8;break}return e.next=3,(0,M.getCurrentVariant)();case 3:t=e.sent,n=s({level:"store",surface:"launchpad"},(0,g.getWindowSize)()),r=s({},n,{event:"hide_collision",group:t}),l(r),q=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),f=(i=U(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.sdataBadgeDefaults,a=r.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.default)();case 2:return t=e.sent,e.next=5,(0,I.default)();case 5:(n=e.sent)&&!$&&((0,E.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:a},{product:t||{},offer:n},s({},o,{productId:t.id||null}))(),$=!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)}),p=F(n(11)),v=F(n(9)),h=F(n(8)),y=F(n(53)),g=n(128),m=F(n(21)),b=F(n(37)),_=F(n(64)),E=n(26),w=n(2493),O=F(w),S=n(312),x=F(n(2532)),P=F(n(1313)),T=F(n(171)),I=F(n(401)),C=n(313),R=F(C),k=F(n(2533));n(2534);var L=F(n(2535)),M=n(100),A=F(M),N=F(n(279)),j=F(n(2537)),D=n(888);function F(e){return e&&e.__esModule?e:{default:e}}function U(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var B=!1,H=!1,G=void 0,$=!1,V=!1,q=!1,z=!1,W=!1,Y=!1,X=!1,K=!1;function Q(){G&&(0,w.unMountApp)(G),B=!1,H=!1,j.default.installed&&j.default.uninstall()}h.default.addListener("ui:action",(function(e,t){"pre-open"===t.action&&(U(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.default)();case 2:t=e.sent,B&&t&&Q();case 4:case"end":return e.stop()}}),e,void 0)})))(),X=!0)})),function(){var e,t=this,n=(e=U(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,p,h,_,w,T,I,L,F,U,$,J,Z,ee,te,ne,re,oe,ae,ie,ue,se,ce,le,de,fe,pe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,M.canRunTips)();case 2:if(!e.sent){e.next=9;break}if(y.default.trackImpression(D.STANDALONE_EXPERIMENT),y.default.trackImpression("tips_container_v4"),!H){e.next=8;break}return e.abrupt("return");case 8:H=!0;case 9:if(!B){e.next=12;break}return H=!1,e.abrupt("return");case 12:return e.next=14,(0,N.default)();case 14:return t=e.sent,e.next=17,Promise.all([(0,R.default)(),(0,C.getTipsGroup)(),(0,A.default)(),(0,M.isTipsDisabled)(),(0,M.isAutoPop)(),(0,k.default)()]);case 17:return n=e.sent,r=u(n,6),o=r[0],a=r[1],i=r[2],p=r[3],h=r[4],_=r[5],w=s({level:t?"store":"product",surface:t?"launchpad_homepage":"pdp"},(0,g.getWindowSize)()),_&&(w.level="store",w.surface="launchpad_homepage"),T=m.default.visible(),e.next=30,b.default.isFirstTime();case 30:if(I=e.sent,!(X||T||I)||!t){e.next=36;break}return v.default.debug("honeyTips:canShowUniversalContainer: UI action present so stood down"),V||(d(),V=!0),H=!1,e.abrupt("return");case 36:if(!i){e.next=98;break}if(W){e.next=45;break}return(0,E.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{funnelForLaunchpad:_},s({},w,{surface:w.surface}))(),W=!0,e.next=42,b.default.getSetting("autopopsDisabled");case 42:L=e.sent,F=q||z||Y||K,L&&!F&&(U=s({},w,{event:"implicit_hover_suppressed"}),c(U),v.default.debug("honeyTips: autopops disabled"));case 45:if(o){e.next=53;break}return e.next=48,(0,M.getCurrentVariant)();case 48:return $=e.sent,J=s({},w,{event:"hide_holdout",group:$,holdout:a}),z||(v.default.debug("honeyTips: user is in holdout group, dont show tips"),l(J),f({sdataBadgeDefaults:w,action:"tips_available_holdout"}),(0,E.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},w))(),z=!0),H=!1,e.abrupt("return");case 53:return e.next=55,(0,P.default)();case 55:if(Z=e.sent,ee=Z.tipsEnabledByUser,te=Z.reason,ee){e.next=71;break}if(Y){e.next=69;break}return Y=!0,e.next=63,(0,M.getCurrentVariant)();case 63:ne=e.sent,re=s({},w,{event:te?"hide_disable:"+te:"hide_disable",group:"launch_v:"+ne}),l(re),f({sdataBadgeDefaults:w,action:"tips_available_disable"}),(0,E.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},w))(),v.default.debug("honeyTips: tips disabled by user");case 69:return H=!1,e.abrupt("return");case 71:return e.next=73,(0,x.default)();case 73:if(oe=e.sent,ae=oe.isSuppressed,ie=oe.reason,!ae){e.next=89;break}if(K){e.next=87;break}return e.next=80,(0,M.getCurrentVariant)();case 80:ue=e.sent,se=s({},w,{event:ie?"hide_snooze:"+ie:"hide_snooze",group:"launch_v:"+ue}),l(se),K=!0,v.default.debug("honeyTips: tips suppressed by user"),f({sdataBadgeDefaults:w,action:"tips_available_suppress"}),(0,E.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},w))();case 87:return H=!1,e.abrupt("return");case 89:if(B){e.next=96;break}return e.next=92,(0,O.default)();case 92:ce=e.sent,(le=ce.shadowRoot)&&(G=le,B=!0,j.default.installed||j.default.install()),H=!1;case 96:e.next=106;break;case 98:if(_&&!W?((0,E.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{isValidLaunchpadPage:_},s({},w))(),W=!0):W||((0,E.sdataTipsDebug)({debugEvent:"funnel",action:"should_not_show_container"},{isValidLaunchpadPage:_},s({},w))(),W=!0),!(0,S.getIsProductPage)()){e.next=104;break}return e.next=102,(0,M.getIsInExperimentPopulation)();case 102:de=e.sent,h?(fe=s({},w,{event:"hide",group:"autopop_displayed"}),l(fe)):p&&de&&(pe=s({},w,{event:"hide",group:"control"}),l(pe));case 104:H=!1,Q();case 106:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)});p.default.sendEvent("tip004036",{action:"init",debugEvent:"funnel"}),(0,_.default)("honeyTips:newPage")(U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e,t)})))),(0,_.default)("honeyTips:turnOff")(U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q();case 1:case"end":return e.stop()}}),e,t)}))))}(),t.default={creditCardOffers:L.default.creditCardOffers,getInitialized:function(){return B},getInitalizing:function(){return H}}},1309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=n(37),u=(r=i)&&r.__esModule?r:{default:r};function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}t.default=function(e){var t,n,r=e||{},i=r.mouseEnterDelay,c=void 0===i?3e3:i,l=r.tooltipHideDelay,d=void 0===l?2e3:l,f=r.tooltipHideDelayOnHover,p=void 0===f?3e3:f,v=(0,a.useState)(),h=o(v,2),y=h[0],g=h[1],m=(0,a.useState)(),b=o(m,2),_=b[0],E=b[1],w=(0,a.useState)(!1),O=o(w,2),S=O[0],x=O[1],P=(t=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y&&(clearTimeout(y),g(),E(setTimeout((function(){x(!1),E()}),d)));case 1:case"end":return e.stop()}}),e,void 0)}))),function(){return t.apply(this,arguments)});return{shouldShowTooltip:S,forceHideTooltip:function(){x(!1),E()},startClickBadgeTooltip:(n=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.getSetting("honeyTips:badge:first_time_click_badge_tooltip");case 2:e.sent||_||g(setTimeout(s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.updateSetting("honeyTips:badge:first_time_click_badge_tooltip",!0);case 2:x(!0),E(setTimeout((function(){x(!1),E()}),p));case 4:case"end":return e.stop()}}),e,void 0)}))),c));case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return n.apply(this,arguments)}),endClickBadgeTooltip:P}}},1310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverOrClickEvents=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=n(6),i=n(63),u=n(25),s=t.hoverOrClickEvents={MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",DELAYED_MOUSEENTER:"delayedMouseEnter",MOUSELEAVE:"mouseleave"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hoverTimeout,n=void 0===t?1e3:t,c=e.isStaticContainer,l=void 0!==c&&c,d=(0,o.useState)(null),f=r(d,2),p=f[0],v=f[1],h=(0,a.useDispatch)(),y=(0,a.useSelector)(u.selectCurrentContainerId),g=void 0,m=(0,o.useCallback)((function(){h((0,i.sdataTipBadgeInitialHoverEvent)(y)),v({event:s.MOUSEENTER}),g=setTimeout((function(){v({event:s.DELAYED_MOUSEENTER})}),n)}),[]),b=(0,o.useCallback)((function(){clearTimeout(g),g=void 0,v({event:s.MOUSELEAVE})}),[]),_=(0,o.useCallback)((function(){clearTimeout(g),g=void 0,v({event:s.MOUSEUP})}),[]),E=(0,o.useRef)();return(0,o.useEffect)((function(){return E.current&&l&&(E.current.addEventListener("mouseenter",m),E.current.addEventListener("mouseleave",b),E.current.addEventListener("mouseup",_),clearTimeout(g)),function(){E.current&&(E.current.removeEventListener("mouseenter",m),E.current.removeEventListener("mouseleave",b),E.current.removeEventListener("mouseup",_),clearTimeout(g))}}),[E]),[E,p]}},1311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeAnimationState=void 0,t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(c.selectCurrentContainerId),n=((0,i.useSelector)((0,o.selectUniversalContainerById)(t))||{}).badgeAnimationState,r=void 0===n?l.WAITING:n,u=(0,a.useCallback)((function(){e((0,s.default)(l.START))}),[e]),d=(0,a.useCallback)((function(){e((0,s.default)(l.END))}),[e]);return{animate:r,startAnimation:u,endAnimation:d}};var r,o=n(18),a=n(0),i=n(6),u=n(2508),s=(r=u)&&r.__esModule?r:{default:r},c=n(25);var l=t.BadgeAnimationState={START:"start",END:"end",WAITING:"waiting",CANCELED:"canceled"}},1312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(4)),a=n(2),i=n(3);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({container:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",height:"264px"},circle:{width:"88px",height:"88px",border:"1.5px solid "+i.Colors.grey800,boxSizing:"border-box",borderRadius:"50%",marginLeft:"auto",marginRight:"auto",marginBottom:"16px",fontStyle:"normal",fontWeight:"300",fontSize:"50px",lineHeight:"85px",display:"flex",alignSelf:"center",justifyContent:"center"},circleText:{fontStyle:"normal",fontWeight:"500",fontSize:"17px",lineHeight:"22px",marginBottom:"16px, auto",display:"flex"}}),c=function(){var e=s();return r.default.createElement("div",{className:e.container},r.default.createElement("div",null,r.default.createElement("div",{className:e.circle},"!"),r.default.createElement("div",{className:e.circleText},o.default.getMessage("There_are_no_tips_for_this_item"))))};c.propTypes={},c.defaultProps={},t.default=c},1313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=s(n(14)),i=s(n(9)),u=s(n(37));function s(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.default.getInfo();case 2:if((t=e.sent)&&t.isLoggedIn){e.next=11;break}return e.next=6,u.default.getSetting("tipsLoggedOutDisabled");case 6:if(!e.sent){e.next=9;break}return e.abrupt("return",{tipsEnabledByUser:!1,reason:"tips_logged_out_disabled"});case 9:return i.default.debug("isTipsEnabledByUser: defaulted to true because user does not exist or is not logged in"),e.abrupt("return",{tipsEnabledByUser:!0});case 11:return e.next=13,a.default.getSetting("tipsEnabled");case 13:return n=e.sent,o=void 0,(r=!!n)||(o=void 0===n?"tips_enabled_undefined":"tips_enabled_false"),e.abrupt("return",{tipsEnabledByUser:r,reason:o});case 18:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)})},1314:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>0!==r(e,t,n)},1315:function(e,t,n){const r=n(923),o=n(1314),a=n(509),i=n(926),u=n(925),s=n(927);e.exports=(e,t,n,c)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return r(e,n,c);case"!=":return o(e,n,c);case">":return a(e,n,c);case">=":return i(e,n,c);case"<":return u(e,n,c);case"<=":return s(e,n,c);default:throw new TypeError(`Invalid operator: ${t}`)}}},1316:function(e,t,n){const r=n(182);e.exports=(e,t,n)=>{try{t=new r(t,n)}catch(e){return!1}return t.test(e)}},1364:function(e,t,n){n(429),e.exports=n(1365)},1365:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(933),n(981),n(986),n(989),n(990),n(996),n(1001),n(1002),n(1004),n(1006),n(1007),n(1008),n(1010),n(1011),n(1013),n(1014),n(1016),n(1017),n(109),n(1021);var r,o=Y(n(24)),a=Y(n(19)),i=Y(n(15)),u=Y(n(381)),s=Y(n(908)),c=Y(n(273)),l=Y(n(2461)),d=Y(n(286)),f=Y(n(1303)),p=Y(n(802)),v=Y(n(290)),h=Y(n(37)),y=Y(n(53)),g=Y(n(300)),m=Y(n(469)),b=Y(n(4)),_=Y(n(1123)),E=Y(n(9)),w=Y(n(8)),O=Y(n(169)),S=Y(n(909)),x=Y(n(1304)),P=Y(n(222)),T=Y(n(145)),I=Y(n(1306)),C=Y(n(127)),R=Y(n(2492)),k=Y(n(91)),L=Y(n(1307)),M=Y(n(11)),A=Y(n(89)),N=Y(n(13)),j=Y(n(31)),D=Y(n(1308)),F=Y(n(21)),U=Y(n(14)),B=Y(n(1124)),H=Y(n(382)),G=Y(n(218)),$=Y(n(913)),V=Y(n(204)),q=Y(n(88)),z=Y(n(2538)),W=Y(n(1317));function Y(e){return e&&e.__esModule?e:{default:e}}o.default.onPossiblyUnhandledRejection((function(e){return E.default.error(e)})),r=window.location.href,w.default.send("page:load",{url:r,hasServiceWorkers:!!((navigator||{}).serviceWorker||{}).controller},{allTabs:!0,background:!0,ignoreResponse:!0}).reflect(),E.default.debug("Honey 13.7.0 content script is ready. Environment is production"),setTimeout((function(){if("www.joinhoney.com"===window.location.hostname){var e=document.querySelector("#messagingEventHandler");if(e)if(e.getAttribute("si_ext"))w.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0});else new MutationObserver((function(){e.getAttribute("si_ext")&&w.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0})})).observe(e,{attributes:!0})}}));var X={$:a.default,adbBp:V.default,acorns:u.default,ajax:s.default,button:c.default,cartPageFetcher:B.default,checkoutPlatform:l.default,clipboard:d.default,config:f.default,confirmation:p.default,cookies:v.default,device:h.default,exclusives:g.default,pdpPopupEngine:z.default,experiments:y.default,extensionReview:m.default,i18n:b.default,imageLoader:_.default,honeyPayNow:x.default,honeyPayPal:P.default,launchpad:q.default,logger:E.default,messages:w.default,offers:O.default,optimus:S.default,pageDetector:C.default,popover:T.default,productFetcher:I.default,runtime:R.default,savingsController:k.default,search:W.default,seleniumComm:L.default,stats:M.default,storage:A.default,stores:N.default,tabs:j.default,tips:D.default,ui:F.default,user:U.default,util:i.default,vims:H.default,websiteComm:G.default,yelp:$.default};w.default.addListener("debug:change",(function(e,t){try{t.active?window.honey=X:delete window.honey}catch(e){}})),t.default=X},182:function(e,t,n){class r{constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof r)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new r(e.raw,t);if(e instanceof o)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){const t=this.options.loose;e=e.trim();const n=t?u[s.HYPHENRANGELOOSE]:u[s.HYPHENRANGE];e=e.replace(n,w),a("hyphen replace",e),e=e.replace(u[s.COMPARATORTRIM],c),a("comparator trim",e,u[s.COMPARATORTRIM]),e=(e=(e=e.replace(u[s.TILDETRIM],l)).replace(u[s.CARETTRIM],d)).split(/\s+/).join(" ");const r=t?u[s.COMPARATORLOOSE]:u[s.COMPARATOR];return e.split(" ").map(e=>p(e,this.options)).join(" ").split(/\s+/).filter(this.options.loose?e=>!!e.match(r):()=>!0).map(e=>new o(e,this.options))}intersects(e,t){if(!(e instanceof r))throw new TypeError("a Range is required");return this.set.some(n=>f(n,t)&&e.set.some(e=>f(e,t)&&n.every(n=>e.every(e=>n.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new i(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(O(this.set[t],e,this.options))return!0;return!1}}e.exports=r;const o=n(928),a=n(508),i=n(125),{re:u,t:s,comparatorTrimReplace:c,tildeTrimReplace:l,caretTrimReplace:d}=n(321),f=(e,t)=>{let n=!0;const r=e.slice();let o=r.pop();for(;n&&r.length;)n=r.every(e=>o.intersects(e,t)),o=r.pop();return n},p=(e,t)=>(a("comp",e,t),e=g(e,t),a("caret",e),e=h(e,t),a("tildes",e),e=b(e,t),a("xrange",e),e=E(e,t),a("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,h=(e,t)=>e.trim().split(/\s+/).map(e=>y(e,t)).join(" "),y=(e,t)=>{const n=t.loose?u[s.TILDELOOSE]:u[s.TILDE];return e.replace(n,(t,n,r,o,i)=>{let u;return a("tilde",e,t,n,r,o,i),v(n)?u="":v(r)?u=`>=${n}.0.0 <${+n+1}.0.0`:v(o)?u=`>=${n}.${r}.0 <${n}.${+r+1}.0`:i?(a("replaceTilde pr",i),u=`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0`):u=`>=${n}.${r}.${o} <${n}.${+r+1}.0`,a("tilde return",u),u})},g=(e,t)=>e.trim().split(/\s+/).map(e=>m(e,t)).join(" "),m=(e,t)=>{a("caret",e,t);const n=t.loose?u[s.CARETLOOSE]:u[s.CARET];return e.replace(n,(t,n,r,o,i)=>{let u;return a("caret",e,t,n,r,o,i),v(n)?u="":v(r)?u=`>=${n}.0.0 <${+n+1}.0.0`:v(o)?u="0"===n?`>=${n}.${r}.0 <${n}.${+r+1}.0`:`>=${n}.${r}.0 <${+n+1}.0.0`:i?(a("replaceCaret pr",i),u="0"===n?"0"===r?`>=${n}.${r}.${o}-${i} <${n}.${r}.${+o+1}`:`>=${n}.${r}.${o}-${i} <${n}.${+r+1}.0`:`>=${n}.${r}.${o}-${i} <${+n+1}.0.0`):(a("no pr"),u="0"===n?"0"===r?`>=${n}.${r}.${o} <${n}.${r}.${+o+1}`:`>=${n}.${r}.${o} <${n}.${+r+1}.0`:`>=${n}.${r}.${o} <${+n+1}.0.0`),a("caret return",u),u})},b=(e,t)=>(a("replaceXRanges",e,t),e.split(/\s+/).map(e=>_(e,t)).join(" ")),_=(e,t)=>{e=e.trim();const n=t.loose?u[s.XRANGELOOSE]:u[s.XRANGE];return e.replace(n,(n,r,o,i,u,s)=>{a("xRange",e,n,r,o,i,u,s);const c=v(o),l=c||v(i),d=l||v(u),f=d;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",c?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(i=0),u=0,">"===r?(r=">=",l?(o=+o+1,i=0,u=0):(i=+i+1,u=0)):"<="===r&&(r="<",l?o=+o+1:i=+i+1),n=`${r+o}.${i}.${u}${s}`):l?n=`>=${o}.0.0${s} <${+o+1}.0.0${s}`:d&&(n=`>=${o}.${i}.0${s} <${o}.${+i+1}.0${s}`),a("xRange return",n),n})},E=(e,t)=>(a("replaceStars",e,t),e.trim().replace(u[s.STAR],"")),w=(e,t,n,r,o,a,i,u,s,c,l,d,f)=>`${t=v(n)?"":v(r)?`>=${n}.0.0`:v(o)?`>=${n}.${r}.0`:`>=${t}`} ${u=v(s)?"":v(c)?`<${+s+1}.0.0`:v(l)?`<${s}.${+c+1}.0`:d?`<=${s}.${c}.${l}-${d}`:`<=${u}`}`.trim(),O=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(a(e[n].semver),e[n].semver!==o.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0}},211:function(e,t,n){const r=n(125);e.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))},2420:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutObservationBackgroundManager=t.CheckoutObservationContentManager=t.DataTransporter=void 0;var o=n(2421);Object.defineProperty(t,"DataTransporter",{enumerable:!0,get:function(){return r(o).default}});var a=n(2432);Object.defineProperty(t,"CheckoutObservationContentManager",{enumerable:!0,get:function(){return r(a).default}});var i=n(2439);Object.defineProperty(t,"CheckoutObservationBackgroundManager",{enumerable:!0,get:function(){return r(i).default}})},2421:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1297),i=n(914),u=n(426),s=n(503),c=function(){function e(e){var t=e.window,n=new a.FrameTransportClient({allowedOrigin:t.location.origin,id:s.FRAME_TRANPORT_IDS.PAGE_TO_CONTENT_TRANSPORT}),r=new i.Client({transport:n,options:{}});r.connect(t),this.client=r}return e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.client.invoke(s.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,{data:e,options:{timeoutMilliseconds:3e4}})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),u.logger.info("[CheckoutObservation] Failed to send page to content",{error:t}),[3,3];case 3:return[2]}}))}))},e}();t.default=c},2422:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportClient=void 0;var r=function(){function e(e){var t=e.allowedOrigin,n=e.id;this.allowedOrigin=t,this.id=n}return e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;this.target=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.subscription&&(this.subscription.dispose(),this.target=void 0,this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=this.target;if(!n)throw new Error("No connection available. Did you to call connect() before attempting to send a message");n.postMessage(t,this.allowedOrigin)},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){"*"!==t.allowedOrigin&&e.origin!=t.allowedOrigin||e.data&&e.data.meta&&"request"!==e.data.meta.type&&n({message:e.data,source:e.source,context:void 0})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportClient=r},2423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2424:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2425:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2426),t),o(n(2427),t),o(n(2428),t),o(n(2429),t)},2426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,n=!1;function r(e){t(e)}return window.addEventListener("message",r),{dispose:function(){n||(n=!0,window.removeEventListener("message",r))}}},t.send=function(e){var t=e.target,n=e.origin,r=e.message;t.postMessage(r,n)}},2427:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2428:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var a=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,n=e.target,r=e.context;this.transport.send({message:t,target:n,context:r})},e.prototype.handle=function(e,t){var n=this.transport.prepareHandle(e,t),r=n.actionType,o=n.handlerFunc;this.routes[r]=o},e.prototype.onMessage=function(e){var t=e.message,n=e.source,a=e.context;return r(this,void 0,void 0,(function(){var e,r,i,u,s,c;return o(this,(function(o){switch(o.label){case 0:if(!t)return[2];if(!t.meta)return[2];if(e=t.meta.action,!(r=t.meta.messageId)||!e)return[2];if(!(i=this.routes[e]))return[2];u={meta:{action:e,messageId:r,type:"response"}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i({message:t,source:n,context:a})];case 2:return s=o.sent(),u.data=s,[3,4];case 3:return c=o.sent(),u.errors=[{message:c.toString()}],[3,4];case 4:return this.response({message:u,target:n,context:a}),[2]}}))}))},e}();t.Server=a},2429:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(220),o=n(2430),a=function(){function e(e){var t=e.transport,n=e.defaultTimeoutMilliseconds,r=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=n||100;var a=o.LoggingDriverNoop.createService();this.log=a,r&&r.log&&(this.log=r.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var n=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=r.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,r){var o={resolve:t,reject:r,timeoutId:void 0,action:l.meta.action};n.inflight[""+c]=o,n.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+n.transport.getId()+"] ["+l.meta.action+"]",l.data),n.transport.send({message:l,options:s});var a=setTimeout((function(){var t=n.inflight[c];t&&(delete n.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var n=t.meta.action,r=t.meta.messageId;if(r&&n){var o=this.inflight[r];if(o&&n==o.action){if(delete this.inflight[r],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var r=n(2431),o=function(){function e(){}return e.createService=function(){return new r.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var r=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=r},2432:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(1297),i=n(915),u=n(504),s=n(915),c=n(2438),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromPageToBackgroundServer(n),t.configureFromBackgroundToPageServer(n)],r}return o(t,e),t.configureFromPageToBackgroundServer=function(e){var t=e.messages,n=e.allowedOrigins,r=e.store,o=new a.FrameTransportServer({allowedOrigins:n}),u=new i.HoneyMessagingTransportClient,s={postMessage:function(e){return t.send(e.meta.action,e.data,{ignoreResponse:!0,background:!0})}};return new c.FromPageToBackgroundServer({canPostMessage:s,serverTransport:o,clientTransport:u,store:r})},t.configureFromBackgroundToPageServer=function(e){var t=e.messages,n=e.executeScript,r=e.scriptPath,o=new s.HoneyMessagingTransportServer({target:t});return new c.FromBackgroundToPageServer({serverTransport:o,executeScript:n,scriptPath:r})},t}(u.ManagerBase);t.default=l},2433:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=void 0;var o=n(220),a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.prototype.send=function(e){var t,n=e.message,o=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var a=o.src;a&&a.tabId&&(t=a.tabId);var i=this.platform.postMessage(n,t);this.messageHandler(r(r({},n),{data:i}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2434:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=n(220),i=function(){function e(e){var t=e.id,n=void 0===t?a.v4().toString():t,r=e.target;this.id=n,this.platform=r,this.honeyMessagesListeners={}}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,n=e.context;n&&(n.result=t.data)},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var n=t[e];this.honeyMessagesListeners[n].dispose()}this.honeyMessagesListeners={}},e.prototype.prepareHandle=function(e,t){var n=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return r(n,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:if(n={source:{postMessage:function(){return i}},context:{result:null,src:i},message:{meta:{messageId:a.v4().toString(),type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return[4,this.messageEnvelopeHandler(n)];case 1:return r.sent(),[2,n.context.result]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return n.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e}();t.HoneyMessagingTransportServer=i},2435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2436:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].start()}},e.prototype.stop=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].stop()}},e}();t.default=r},2437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){this.server&&this.server.start()},e.prototype.stop=function(){this.server&&this.server.stop()},e}();t.default=r},2438:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromBackgroundToPageServer=t.FromPageToBackgroundServer=void 0;var u=n(914),s=n(426),c=n(503),l=n(504),d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.clientTransport,o=e.store,l=e.canPostMessage;try{var d=new u.Server({transport:n}),f=new u.Client({transport:r});return f.connect(l),d.handle(c.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,a,u,l,d,p;return i(this,(function(i){switch(i.label){case 0:s.logger.info("[CheckoutObservation] CONTENT: Frame Server: Got Message from PAGE",e),i.label=1;case 1:return i.trys.push([1,3,,4]),t=e.message,n=t.data,r=n.data,a=n.meta,u=a.platform,l=a.provider,d={data:r,meta:{source:u,destination:l,storeId:o.storeId,storeSessionId:o.sessionId,pageTitle:o.pageTitle,pageURL:o.pageURL}},s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Sending message to background",d),[4,f.invoke(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,{data:d,options:{timeoutMilliseconds:3e4}})];case 2:return i.sent(),[3,4];case 3:return p=i.sent(),s.logger.info("[CheckoutObservation] Failed to invoke CONTENT_TO_BG_EVENT",{error:p}),[3,4];case 4:return[2]}}))}))})),d}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromPageToBackgroundServer=d;var f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.executeScript,o=e.scriptPath;try{var l=new u.Server({transport:n});return l.handle(c.MESSAGE_ACTIONS.COLLECT_DATA,(function(e){return a(t,void 0,void 0,(function(){var t,n,a;return i(this,(function(i){t=e.message;try{s.logger.info("[CheckoutObservation] CONTENT: Got message from background, triggering PAGE",t),n=t.data,a={id:c.SCRIPT_IDS.HONEY_ANALYTICS_CONFIG,data:n},r(o,a)}catch(e){s.logger.info("[CheckoutObservation] Failed to execute observation script",{error:e})}return[2]}))}))})),l}catch(e){return s.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromBackgroundToPageServer=f},2439:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(915),u=a(n(2440)),s=n(504),c=n(2459),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromContentToBackendServer(n),t.configureFromContentToContentServer(n)],r}return o(t,e),t.configureFromContentToBackendServer=function(e){var t=e.analyticsMetaLoader,n=e.host,r=e.messages,o=e.request,a=new u.default({endpoint:n+"/eca",request:o,analyticsMetaLoader:t}),s=new i.HoneyMessagingTransportServer({target:r});return new c.FromContentToBackendServer({onMessageHandler:a.enqueue,transport:s})},t.configureFromContentToContentServer=function(e){var t=e.messages,n=e.analyticsSensorsFetcher,r=new i.HoneyMessagingTransportServer({target:t}),o=new i.HoneyMessagingTransportClient,a={postMessage:function(e,n){var r={ignoreResponse:!0,tab:n};return t.send(e.meta.action,e.data,r)}};return new c.FromContentToContentServer({onMessageHandler:n,serverTransport:r,clientTransport:o,canPostMessage:a})},t}(s.ManagerBase);t.default=l},2440:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(220),u=n(2441),s=n(426),c=n(2447),l=function(){function e(e){var t=this,n=e.request,l=e.endpoint,d=e.analyticsMetaLoader;this.enqueue=function(e){return o(t,void 0,void 0,(function(){var t,n,o,u,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.analyticsMetaLoader()];case 1:return t=a.sent(),n=e.data,o=e.meta,u={data:n,meta:r(r(r({},t),o),{timestamp:Date.now()})},c={name:i.v4(),value:u},s.logger.info("[CheckoutObservation] Enqueueing event:",c),this.checkpointStorage.save(c),[2]}}))}))},this.endpoint=l,this.analyticsMetaLoader=d;var f=new u.MemoryStorage,p=new u.JSONStorage({storage:f});this.checkpointStorage=new u.CheckpointJSONStorage({storage:p,checkpointIntervalMilliseconds:1e3,checkpoint:this.checkpoint.bind(this)}),this.saveObservationRepository=new c.RESTURLObservationRepository({endpoint:l,request:n})}return e.prototype.checkpoint=function(e){return o(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:if(0===e.length)return[2,[]];t=[],n=[],e.forEach((function(e){t.push(e.name),n.push(e.value)})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.saveObservationRepository.saveURLObservations(n)];case 2:return r.sent(),[2,t];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},e}();t.default=l},2441:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2442),t),o(n(2444),t)},2442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=n(2443);Object.defineProperty(t,"MemoryStorage",{enumerable:!0,get:function(){return r.MemoryStorage}})},2443:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=function(){function e(){this.storage={}}return e.prototype.save=function(e){var t=e.name,n=e.value;return this.storage[t]=n,Promise.resolve()},e.prototype.open=function(e){var t=e.name,n=this.storage[t];return Promise.resolve(n)},e.prototype.list=function(){return Promise.resolve(Object.keys(this.storage))},e.prototype.delete=function(e){var t=e.name;return delete this.storage[t],Promise.resolve()},e}();t.MemoryStorage=r},2444:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=t.JSONStorage=void 0;var r=n(2445);Object.defineProperty(t,"JSONStorage",{enumerable:!0,get:function(){return r.JSONStorage}});var o=n(2446);Object.defineProperty(t,"CheckpointJSONStorage",{enumerable:!0,get:function(){return o.CheckpointJSONStorage}})},2445:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONStorage=void 0;var a=function(){function e(e){var t=e.storage;this.storage=t}return e.prototype.save=function(e){var t=e.name,n=e.value;return void 0===n?Promise.resolve():this.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.storage.open({name:t})]}))}))},e.prototype.list=function(){return this.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.storage.delete({name:t})},e}();t.JSONStorage=a},2446:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=void 0;var i=function(){function e(e){this.options=r({},e)}return e.prototype.start=function(){},e.prototype.stop=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.startTimeout=function(){var e=this;this.options.checkpointIntervalMilliseconds&&(this.timeoutId=setTimeout((function(){e.timeoutId=void 0,e.flush()}),this.options.checkpointIntervalMilliseconds))},e.prototype.registerInterval=function(){this.timeoutId||this.startTimeout()},e.prototype.checkpointComplete=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.isCheckpointing=!1,[4,this.options.storage.list()];case 1:return e.sent().length>0&&this.registerInterval(),[2]}}))}))},e.prototype.flush=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,i,u,s=this;return a(this,(function(c){switch(c.label){case 0:return this.isCheckpointing=!0,[4,(e=this.options.storage).list()];case 1:return t=c.sent(),n=t.map((function(t){return o(s,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,e.open({name:t})];case 1:return n=r.sent(),[2,{name:t,value:n}]}}))}))})),[4,Promise.all(n)];case 2:return r=c.sent(),[4,this.options.checkpoint(r)];case 3:i=c.sent(),u=0,c.label=4;case 4:return u<i.length?[4,e.delete({name:i[u]})]:[3,7];case 5:c.sent(),c.label=6;case 6:return u++,[3,4];case 7:return[4,this.checkpointComplete()];case 8:return c.sent(),[2]}}))}))},e.prototype.save=function(e){var t=e.name,n=e.value;return this.timeoutId||this.isCheckpointing||this.startTimeout(),this.options.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return this.options.storage.open({name:t})},e.prototype.list=function(){return this.options.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.options.storage.delete({name:t})},e}();t.CheckpointJSONStorage=i},2447:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=t.RESTURLObservationRepository=t.EmbeddedURLObservationRepository=t.GraphQLURLObservationRepository=t.URLObservationService=void 0,o(n(2448),t);var a=n(2449);Object.defineProperty(t,"URLObservationService",{enumerable:!0,get:function(){return a.URLObservationService}});var i=n(2450);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return i.GraphQLURLObservationRepository}});var u=n(2452);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return u.EmbeddedURLObservationRepository}});var s=n(2455);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return s.RESTURLObservationRepository}});var c=n(2457);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return c.HybridURLObservationRepository}})},2448:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReversedURLObservationEncoding=t.URLObservationEncoding=void 0,function(e){e.Form="application/x-www-form-urlencoded",e.Json="application/json"}(r=t.URLObservationEncoding||(t.URLObservationEncoding={})),t.ReversedURLObservationEncoding=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{})},2449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=void 0;var r=function(){function e(e){var t=e.repository;this.repository=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.repository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.repository.saveURLObservations(e)},e}();t.URLObservationService=r},2450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var r=n(2451);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return r.GraphQLURLObservationRepository}})},2451:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var a=function(){function e(e){var t=e.client;this.client=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return r(this,void 0,void 0,(function(){var e,n,r,a;return o(this,(function(o){switch(o.label){case 0:e="checkout_getURLObservationPatterns",n={params:{storeId:t,enabled:!0}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.query(e,n)];case 2:return r=o.sent(),a=r.data,r.errors||!a?[2,[]]:[2,a.eventDetectionGetURLObservationPatterns||[]];case 3:return o.sent(),[2,[]];case 4:return[2]}}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t="checkout_eventDetectionReceiveURLObservations",n={params:{observations:e}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.mutate(t,n)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),console.error("[GraphQL] URL Save Observation",r),[2,Promise.resolve()];case 4:return[2]}}))}))},e}();t.GraphQLURLObservationRepository=a},2452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var r=n(2453);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return r.EmbeddedURLObservationRepository}})},2453:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var o=r(n(2454)),a=n(426),i=function(){function e(){}return e.prototype.getURLPatterns=function(e){var t=e.storeId;a.logger.info("Fetching URL Patterns for "+t);var n=o.default[t];if(!n)return Promise.resolve([]);var r=n.urls.filter((function(e){return e.enabled})).map((function(e){return{pattern:e.pattern,encoding:e.encoding,include:e.include,filter:e.filter}}));return Promise.resolve(r)},e.prototype.saveURLObservations=function(e){return a.logger.info("Sending Observations",e),Promise.resolve()},e}();t.EmbeddedURLObservationRepository=i},2454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"7703020760979500833":{storeName:"49th Coffee",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"cu"},{key:"pa"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#id"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},133:{storeName:"Nordstroms",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},30:{storeName:"BH Photo",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},"7512623001795621936":{storeName:"chewy.com",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},185:{storeName:"Target",urls:[{label:"Target Analytics",enabled:!0,pattern:"https://api.target.com/web_analytics/v1",encoding:"application/json",filter:{request:{method:"POST"},data:"$..records[?(@.checkout)]"},include:[{key:"appState.globalPage"},{key:"appState.pageName"},{key:"appState.pageType"},{key:"appState.previousPageName"},{key:"appState.previousPageType"},{key:"appState.previousSearchTerm"},{key:"appState.referrer"},{key:"appState.cmsPageType"},{key:"checkout"},{key:"products"}]}]},"149870454361909889":{storeName:"Kylie Cosmetics",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]}}},2455:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var r=n(2456);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return r.RESTURLObservationRepository}})},2456:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var a=function(){function e(e){var t=e.endpoint,n=e.request;this.endpoint=t,this.request=n}return e.prototype.getURLPatterns=function(e){e.storeId;return r(this,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Not Implemented")}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request.post(this.endpoint).send(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))},e}();t.RESTURLObservationRepository=a},2457:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=n(2458);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return r.HybridURLObservationRepository}})},2458:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=function(){function e(e){var t=e.saveObservationRepository,n=e.getPatternsRepository;this.saveObservationRepository=t,this.getPatternsRepository=n}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.getPatternsRepository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.saveObservationRepository.saveURLObservations(e)},e}();t.HybridURLObservationRepository=r},2459:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromContentToBackendServer=t.FromContentToContentServer=void 0;var u=n(914),s=n(426),c=n(503),l=n(504),d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.onMessageHandler,r=e.transport;try{var o=new u.Server({transport:r});return o.handle(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,r,o;return i(this,(function(a){switch(a.label){case 0:s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received req",e),t=e.message,r=t.data,s.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received message",r),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n(r)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),s.logger.info("[CheckoutObservation] Failed to handle message from content",{error:o}),[3,4];case 4:return[2]}}))}))})),o}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToBackendServer=d;var f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.canPostMessage,r=e.serverTransport,o=e.clientTransport,l=e.onMessageHandler;try{var d=new u.Client({transport:o});d.connect(n);var f=new u.Server({transport:r});return f.handle(c.MESSAGE_ACTIONS.ENABLE_BG_SERVER,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,o,a,u;return i(this,(function(i){switch(i.label){case 0:t=e.message,n=e.context,i.label=1;case 1:return i.trys.push([1,4,,5]),(r=t.data)&&r.storeId?(o=r.storeId,[4,l(o)]):[2];case 2:return(a=i.sent())&&a.length?(s.logger.info("[CheckoutObservation] BACKGROUND -> CONTENT: Trigger content with provider",a),[4,d.invoke(c.MESSAGE_ACTIONS.COLLECT_DATA,{data:a,options:{timeoutMilliseconds:3e3,transport:n}})]):[2];case 3:return i.sent(),[3,5];case 4:return u=i.sent(),s.logger.info("[CheckoutObservation] Failed to trigger content",{error:u}),[3,5];case 5:return[2]}}))}))})),f}catch(e){return s.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToContentServer=f},2460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservationFeatureEnabled=u;var r,o=n(106),a=(r=o)&&r.__esModule?r:{default:r};var i=(0,n(1174).makeDuration)({minutes:15});function u(){return a.default.getFeatureFlag("checkout_analytics_observation_v_2",{ttl:i})}t.default={isObservationFeatureEnabled:u}},2461:function(e,t,n){"use strict";var r=c(n(9)),o=c(n(8)),a=c(n(916)),i=c(n(1298)),u=c(n(1021)),s=c(n(2481));function c(e){return e&&e.__esModule?e:{default:e}}function l(e){var t,n=this,a=e.feature,i=e.startOn,u=e.start,s=i||"page:load";o.default.addListener(s,(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("checkoutPlatform: initializing "+a),e.prev=1,e.next=4,u();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),r.default.error("checkoutPlatform: feature failed to start: "+a);case 9:case"end":return e.stop()}}),e,n,[[1,6]])})),function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))}))}l({feature:"events",start:a.default.start}),l({feature:"observation",start:u.default.start}),l({feature:"checkoutPaypal",start:i.default.start}),l({feature:"checkout",start:s.default.start})},2462:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(9),a=(r=o)&&r.__esModule?r:{default:r},i=n(505);var u={paypalFrameDetected:function(){throw new Error("checkoutEvents: not initialized")}};var s={initialize:function(){var e=new i.Observable({value:void 0,replay:!0});u.paypalFrameDetected=function(){return e}}};t.default={initialize:function(){s.initialize(),s.initialize=function(){a.default.warn("checkoutEvents: events: previously initialized")}},events:u}},2463:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqid=void 0,t.uniqid=function(e){var t=(void 0===e?{}:e).prefix,n=0;return function(){var e=n+1;return n=e,t?""+t+e:e.toString()}}},2464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.honeyMessagesEvents={PAYPAL_IFRAME_DETECTED:"checkout:paypal:iframe"};t.default={honeyMessagesEvents:r}},2465:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverExtension=void 0;var o=n(1299),a=n(2466),i={100:a.LogLevel.Trace,200:a.LogLevel.Debug,300:a.LogLevel.Info,400:a.LogLevel.Warn,500:a.LogLevel.Error},u=((r={})[a.LogLevel.Trace]=100,r[a.LogLevel.Debug]=200,r[a.LogLevel.Info]=300,r[a.LogLevel.Warn]=400,r[a.LogLevel.Error]=500,r),s=function(){function e(e){var t=e.honeyLogger;this.honeyLogger=t}return e.createService=function(t){var n=t.honeyLogger;return new o.LoggingService({driver:new e({honeyLogger:n})})},e.prototype.setLogLevel=function(e){this.honeyLogger.setLevel(u[e])},e.prototype.getLogLevel=function(){return i[this.honeyLogger.getLevel()]},e.prototype.trace=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).trace.apply(e,t)},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).error.apply(e,t)},e}();t.LoggingDriverExtension=s},2466:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.None=-1]="None",e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Debug=3]="Debug",e[e.Trace=4]="Trace"}(t.LogLevel||(t.LogLevel={}))},2467:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,u)}s((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentCoordinator=void 0;var i=n(505),u=n(1300),s=n(2474),c=n(1301),l=n(2475),d=n(1302),f=function(){function e(e){var t=e.log,n=e.backgroundClient,r=e.honeyCheckoutServer,o=e.paypalCheckoutClient,a=e.discoveryRelayServer,u=e.paypalRealyScriptPath,s=e.honeyRealyScriptPath;this.paypalClientConnected=!1,this.discoveryRelayServerState="stopped",this.paypalFrameDetected=new i.Observable({value:{},replay:!1}),this.honeyFrameDetected=new i.Observable({value:{},replay:!1}),this.log=t,this.backgroundClient=n,this.honeyCheckoutServer=this.configureHoneyCheckoutServer(r),this.discoveryRelayServer=this.configureDiscoveryRelayServer(a),this.paypalCheckoutClient=o,this.paypalRealyScriptPath=u,this.honeyRealyScriptPath=s,this.discoveryIndex={paypal:void 0,honey:void 0},this.deployIndex={paypal:void 0,honey:void 0}}return e.prototype.start=function(e){var t=this,n=e.timeout;return this.log.debug("[CheckoutPaypal] Starting content coordinator"),new Promise((function(e,r){if(t.discoveryPromise)return r(new Error("Start already invoked, please wait for discovery to complete before invoking start() again"));var o=n||3e4;t.log.debug("[CheckoutPaypal] Setting discovery timeout to "+o+"ms"),t.discoveryTimeout=setTimeout((function(){t.onDiscoveryTimeout()}),o),t.discoveryPromise={resolve:e,reject:r},t.deployDiscoveryRelays()}))},e.prototype.stop=function(){this.paypalClientConnected=!1,this.paypalCheckoutClient.disconnect(),this.stopDiscoveryRelayServer(),this.discoveryIndex.paypal=void 0,this.discoveryIndex.honey=void 0},e.prototype.getFrames=function(){return this.backgroundClient.invoke(u.BackgroundAction.FrameIds)},e.prototype.startDiscoveryRelayServer=function(){"started"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="started",this.discoveryRelayServer.start()):this.log.debug("[CheckoutPaypal] PayPal discovery server already started")},e.prototype.stopDiscoveryRelayServer=function(){"stopped"!=this.discoveryRelayServerState?(this.discoveryRelayServerState="stopped",this.discoveryRelayServer.stop()):this.log.debug("[CheckoutPaypal] PayPal discovery server already stopped")},e.prototype.deployDiscoveryRelays=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.log.debug("[CheckoutPaypal] Deploying discovery relays"),[4,this.deployPaypalRelay()];case 1:return e.sent(),[4,this.deployHoneyRelay()];case 2:return e.sent(),[2]}}))}))},e.prototype.deployPaypalRelay=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,i,c,l,d,f;return a(this,(function(a){switch(a.label){case 0:return this.discoveryIndex[s.FrameIdKey.PayPal]?(this.log.debug("[CheckoutPaypal] PayPal relay already deployed and discovered"),[2]):this.deployIndex[s.FrameIdKey.PayPal]?(this.log.debug("[CheckoutPaypal] PayPal relay already deployed"),[2]):(this.deployIndex[s.FrameIdKey.PayPal]=!0,this.log.debug("[CheckoutPaypal] Deploying PayPal relay"),this.startDiscoveryRelayServer(),[4,this.getFrames()]);case 1:if(e=a.sent().paypal,t=e.frameId,n=e.tabId,o=Date.now(),i=window.location.origin,!t)return this.log.debug("[CheckoutPaypal] No PayPal Frame Detected"),this.notifyDiscoveryError({source:s.FrameIdKey.PayPal,message:"paypal discovery error"}),[2];this.log.debug("\n      [CheckoutPaypal] Deploying PayPal relay frameId='"+t+"' tabId='"+n+"' file='"+this.paypalRealyScriptPath+"', contentScriptOrigin='"+i+"'\n    "),c={tabId:n,details:{frameId:t,file:this.paypalRealyScriptPath}},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.backgroundClient.invoke(u.BackgroundAction.ExecuteScript,{data:{tabId:c.tabId,details:r(r({},c.details),{file:void 0,code:"window.__honeyContentScriptOrigin = '"+window.location.origin+"';\n          window.__honeyDeployStart = "+o+";"})}})];case 3:return a.sent(),[4,this.backgroundClient.invoke(u.BackgroundAction.ExecuteScript,{data:c})];case 4:return a.sent(),[3,6];case 5:throw l=a.sent(),this.deployIndex[s.FrameIdKey.PayPal]=!1,l;case 6:return(f={})[s.FrameIdKey.PayPal]={tabId:n},d=f,this.removeFrames(d),[2]}}))}))},e.prototype.deployHoneyRelay=function(){return o(this,void 0,void 0,(function(){var e,t,n,o,i,c,l,d,f;return a(this,(function(a){switch(a.label){case 0:return this.discoveryIndex[s.FrameIdKey.Honey]?(this.log.debug("[CheckoutPaypal] Honey relay already deployed and discovered"),[2]):this.deployIndex[s.FrameIdKey.Honey]?(this.log.debug("[CheckoutPaypal] Honey relay already deployed"),[2]):(this.deployIndex[s.FrameIdKey.Honey]=!0,this.log.debug("[CheckoutPaypal] Deploying Honey relay"),this.startDiscoveryRelayServer(),[4,this.getFrames()]);case 1:if(e=a.sent().honey,t=e.frameId,n=e.tabId,o=Date.now(),i=window.location.origin,!t)return this.log.debug("[CheckoutPaypal] No Honey Frame Detected"),this.notifyDiscoveryError({source:s.FrameIdKey.Honey,message:"honey discovery error"}),[2];this.log.debug("[CheckoutPaypal] Deploying Honey relay frameId='"+t+"' tabId='"+n+"' file='"+this.honeyRealyScriptPath+"', contentScriptOrigin='"+i+"', deployStart="+o),c={tabId:n,details:{frameId:t,file:this.honeyRealyScriptPath}},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.backgroundClient.invoke(u.BackgroundAction.ExecuteScript,{data:{tabId:n,details:r(r({},c.details),{file:void 0,code:"window.__honeyContentScriptOrigin = '"+i+"';\n            window.__honeyDeployStart = "+o+";"})}})];case 3:return a.sent(),[4,this.backgroundClient.invoke(u.BackgroundAction.ExecuteScript,{data:c})];case 4:return a.sent(),[3,6];case 5:throw l=a.sent(),this.deployIndex[s.FrameIdKey.Honey]=!1,l;case 6:return(f={})[s.FrameIdKey.Honey]={tabId:n},d=f,this.removeFrames(d),[2]}}))}))},e.prototype.removeFrames=function(e){this.backgroundClient.invoke(u.BackgroundAction.FrameIdsRemove,{data:e})},e.prototype.onDiscoveryTimeout=function(){this.discoveryPromise&&this.notifyDiscoveryError({source:s.FrameIdKey.Honey,message:"Discovery timeout"})},e.prototype.onDiscoveryAck=function(e,t){this.log.debug("[CheckoutPaypal] Discovery ACK "+e+"."),this.discoveryIndex[e]=t;var n=this.discoveryIndex,r=n.paypal,o=n.honey;r&&o&&(this.stopDiscoveryRelayServer(),this.notifyExperienceDeployed())},e.prototype.notifyDiscoveryError=function(e){var t=e.message,n=e.source;this.log.debug("[CheckoutPaypal] Notifying discovery error."),this.discoveryPromise&&(this.log.debug("[CheckoutPaypal] Rejecting discoveryPromise with "+t),this.discoveryPromise.reject(new Error(t||"Unknown error ("+n+")")),this.discoveryPromise=void 0)},e.prototype.notifyExperienceDeployed=function(){this.log.debug("[CheckoutPaypal] Notify deployed."),this.discoveryTimeout&&(clearTimeout(this.discoveryTimeout),this.discoveryTimeout=void 0),this.discoveryPromise?(this.honeyCheckoutServer.start(),this.log.debug("[CheckoutPaypal] Resolving discovery promise."),this.discoveryPromise.resolve(),this.discoveryPromise=void 0):this.log.error("[CheckoutPaypal] No discovery promise detected, did you forget to call ContentCoordinator.start?")},e.prototype.configureDiscoveryRelayServer=function(e){var t=this;return e.handle(d.DiscoveryRelayAction.DiscoveredPayPal,(function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,i,u;return a(this,(function(a){switch(a.label){case 0:return this.log.debug("[CheckoutPaypal] Received discovery ack from PayPal ("+(null===(u=e.context)||void 0===u?void 0:u.origin)+")",e),(t=e.message.data)&&t.errors?(n=t.errors[0],this.log.error("[CheckoutPaypal] Received discovery ack Error:",t.errors),this.notifyDiscoveryError({message:n.message,source:s.FrameIdKey.PayPal}),[3,3]):[3,1];case 1:return this.log.debug("[CheckoutPaypal] Connecting paypalCheckoutClient"),this.paypalCheckoutClient.connect(e.source),this.paypalClientConnected=!0,this.onDiscoveryAck(s.FrameIdKey.PayPal,e.source),[4,this.getFrames()];case 2:r=a.sent().paypal,o=r.tabId,i=r.frameId,this.paypalFrameDetected.next({tabId:o,frameId:i}),a.label=3;case 3:return[2,Promise.resolve()]}}))}))})),e.handle(d.DiscoveryRelayAction.DiscoveredHoney,(function(e){return o(t,void 0,void 0,(function(){var t,n,r,o,i,u;return a(this,(function(a){switch(a.label){case 0:return this.log.debug("[CheckoutPaypal] Received discovery ack from Honey ("+(null===(u=e.context)||void 0===u?void 0:u.origin)+")",e),(t=e.message.data)&&t.errors?(n=t.errors[0],this.notifyDiscoveryError({message:n.message,source:s.FrameIdKey.Honey}),[3,3]):[3,1];case 1:return this.onDiscoveryAck(s.FrameIdKey.Honey,e.source),[4,this.getFrames()];case 2:r=a.sent().honey,o=r.tabId,i=r.frameId,this.honeyFrameDetected.next({tabId:o,frameId:i}),a.label=3;case 3:return[2,Promise.resolve()]}}))}))})),e},e.prototype.configureHoneyCheckoutServer=function(e){var t=this;return e.handle(c.HoneyCheckoutAction.PayPalCreateOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal CreateOrder', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.CreateOrder,{options:{timeoutMilliseconds:3e4}})})),e.handle(c.HoneyCheckoutAction.PayPalApproveOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Approve', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.ApproveOrder,{data:e.message.data})})),e.handle(c.HoneyCheckoutAction.PayPalCancelOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Cancel', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.CancelOrder,{data:e.message.data})})),e.handle(c.HoneyCheckoutAction.PayPalErrorOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Error', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.ErrorOrder,{data:e.message.data})})),e.handle(c.HoneyCheckoutAction.PayPalConfig,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'PayPal Config', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.PayPalConfig)})),e.handle(c.HoneyCheckoutAction.PayPalVersion,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'version', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(l.PayPalCheckoutAction.Version)})),e.handle(c.HoneyCheckoutAction.HoneyCheckoutIFrameComplete,(function(e){return t.stop(),Promise.resolve()})),e},e}();t.ContentCoordinator=f},2468:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2469),t),o(n(2470),t),o(n(2471),t),o(n(2472),t)},2469:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,n=!1;function r(e){t(e)}return window.addEventListener("message",r),{dispose:function(){n||(n=!0,window.removeEventListener("message",r))}}},t.send=function(e){var t=e.target,n=e.origin,r=e.message;t.postMessage(r,n)}},2470:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var r=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,n=e.target,r=e.context;this.transport.send({message:t,target:n,context:r})},e.prototype.handle=function(e,t){var n=this.transport.prepareHandle(e,t),r=n.actionType,o=n.handlerFunc;this.routes[r]=o},e.prototype.onMessage=function(e){var t=e.message,n=e.source,r=e.context;if(t&&t.meta){var o=t.meta.action,a=t.meta.messageId;if(a&&o){var i=this.routes[o];if(i){var u={meta:{action:o,messageId:a,type:"response"}};try{var s=i({message:t,source:n,context:r});s&&"object"==typeof s&&"function"==typeof s.then?this.onPromiseLikeResponse(s,u,{message:t,source:n,context:r}):(u.data=s,this.response({message:u,target:n,context:r}))}catch(e){u.errors=[{message:e.message||e.toString()}],this.response({message:u,target:n,context:r})}}}}},e.prototype.onPromiseLikeResponse=function(e,t,n){var r=this,o=n.source,a=n.context;return e.then((function(e){t.data=e,r.response({message:t,target:o,context:a})})).catch((function(e){t.errors=[{message:e.message||e.toString()}],r.response({message:t,target:o,context:a})}))},e}();t.Server=r},2472:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(220),o=n(2473),a=function(){function e(e){var t=e.transport,n=e.defaultTimeoutMilliseconds,r=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=n||100;var a=o.LoggingDriverNoop.createService();this.log=a,r&&r.log&&(this.log=r.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var n=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var u=this.defaultTimeoutMilliseconds,s={};i&&(i.transport&&(s=i.transport),i.timeoutMilliseconds&&(u=i.timeoutMilliseconds));var c=r.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,r){var o={resolve:t,reject:r,timeoutId:void 0,action:l.meta.action};n.inflight[""+c]=o,n.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+n.transport.getId()+"] ["+l.meta.action+"]",l.data),n.transport.send({message:l,options:s});var a=setTimeout((function(){var t=n.inflight[c];t&&(delete n.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+u+"ms")))}),u);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var n=t.meta.action,r=t.meta.messageId;if(r&&n){var o=this.inflight[r];if(o&&n==o.action){if(delete this.inflight[r],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2473:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var r=n(1299),o=function(){function e(){}return e.createService=function(){return new r.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2474:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=t.FrameIdKey=void 0;var r,o=n(505);!function(e){e.PayPal="paypal",e.Honey="honey"}(r=t.FrameIdKey||(t.FrameIdKey={}));var a=function(){function e(e){var t=e.paypalRequestObserver,n=e.honeyRequestObserver,r=e.paypalURLPatterns,a=e.honeyURLPatterns;if(this.frameIdIndex={},this.paypalFrameObservation=new o.Observable({value:{},replay:!1}),this.honeyFrameObservation=new o.Observable({value:{},replay:!1}),!t)throw new Error("a paypalRequestObserver must be provided");if(!n)throw new Error("a honeyRequestObserver must be provided");if(!r)throw new Error("an array of paypalURLPatterns must be provided");if(!a)throw new Error("an array of honeyURLPatterns must be provided");this.expiresAfterSeconds=3600,this.paypalRequestObserver=t,this.honeyRequestObserver=n,this.paypalURLPatterns=r,this.honeyURLPatterns=a}return e.prototype.start=function(){var e=this;this.disposeSubscriptions();var t=this.paypalRequestObserver.completedRequest.subscribe((function(t){e.onPayPalObservation(t)})),n=this.honeyRequestObserver.completedRequest.subscribe((function(t){e.onHoneyObservation(t)}));this.paypalObserverSubscription=t,this.honeyObserverSubscription=n,this.paypalRequestObserver.start({urls:this.paypalURLPatterns}),this.honeyRequestObserver.start({urls:this.honeyURLPatterns})},e.prototype.stop=function(){this.disposeSubscriptions()},e.prototype.disposeSubscriptions=function(){this.honeyObserverSubscription&&(this.honeyObserverSubscription.dispose(),this.honeyObserverSubscription=void 0),this.paypalObserverSubscription&&(this.paypalObserverSubscription.dispose(),this.paypalObserverSubscription=void 0)},e.prototype.setStoreId=function(e){if(this.storeId==e)return Promise.resolve();var t=this.storeId;return this.storeId=e,this.onStoreIdChanged({toStoreId:e,fromStoreId:t})},e.prototype.onStoreIdChanged=function(e){e.toStoreId,e.fromStoreId;return Promise.resolve()},e.prototype.resetFrameIdCache=function(e){var t=void 0===e?{}:e,n=t.honey,o=t.paypal;if(n||o){if(n&&n.tabId&&this.frameIdIndex[n.tabId])delete this.frameIdIndex[n.tabId].frames[r.Honey];if(o&&o.tabId&&this.frameIdIndex[o.tabId])delete this.frameIdIndex[o.tabId].frames[r.PayPal]}else this.frameIdIndex={}},e.prototype.onPayPalObservation=function(e){var t,n=new URL(e.beforeRequest.url),o=e.beforeRequest.tabId,a=this.frameIdIndex[o]||{},i=a.frames||((t={})[r.PayPal]={frameId:void 0,origin:void 0,tabId:void 0},t[r.Honey]={frameId:void 0,origin:void 0,tabId:void 0},t);a.expires=Date.now()+1e3*this.expiresAfterSeconds,i[r.PayPal]={frameId:e.beforeRequest.frameId,origin:n.origin,tabId:o},a.frames=i,this.frameIdIndex[o]=a,this.invalidateExpiredItems(),this.paypalFrameObservation.next(i[r.PayPal])},e.prototype.onHoneyObservation=function(e){var t,n=new URL(e.beforeRequest.url),o=e.beforeRequest.tabId,a=this.frameIdIndex[o]||{},i=a.frames||((t={})[r.PayPal]={frameId:void 0,origin:void 0,tabId:void 0},t[r.Honey]={frameId:void 0,origin:void 0,tabId:void 0},t);a.expires=Date.now()+1e3*this.expiresAfterSeconds,i[r.Honey]={frameId:e.beforeRequest.frameId,origin:n.origin,tabId:o},a.frames=i,this.frameIdIndex[o]=a,this.invalidateExpiredItems(),this.honeyFrameObservation.next(i[r.Honey])},e.prototype.invalidateExpiredItems=function(){var e=this;return new Promise((function(t){setTimeout((function(){var n=Date.now(),r=e.frameIdIndex;Object.keys(r).forEach((function(t){r[t].expires<n&&delete e.frameIdIndex[t]})),t()}),0)}))},e.prototype.getFrameId=function(e,t){var n=this.frameIdIndex[e],r={frameId:void 0,origin:void 0,tabId:e};if(!n)return r;var o=n.frames;return o&&o[t]||r},e}();t.URLObservationService=a},2475:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutServer=t.PayPalCheckoutAction=void 0;var a=n(320);!function(e){e.CreateOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/create",e.ApproveOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/approve",e.CancelOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/cancel",e.ErrorOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/error",e.PayPalConfig="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/config",e.Version="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/version"}(t.PayPalCheckoutAction||(t.PayPalCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.PayPalCheckoutServer=i},2476:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(320).Client);t.PayPalCheckoutClient=a},2477:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(320).Client);t.BackgroundClient=a},2478:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=t.dataSentinel=void 0;var o=n(220);t.dataSentinel={};var a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.prototype.send=function(e){var n,o=e.message,a=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var i=a.src;i&&i.tabId&&(n=i.tabId),void 0===o.data&&(o.data=t.dataSentinel);var u=this.platform.postMessage(o,n);this.messageHandler(r(r({},o),{data:u}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2479:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2480:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportClient=void 0;var r=function(){function e(e){var t=e.allowedOrigin,n=e.id;this.allowedOrigin=t,this.id=n}return e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;this.target=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.subscription&&(this.subscription.dispose(),this.target=void 0,this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=this.target;if(!n)throw new Error("No connection available. Did you to call connect() before attempting to send a message");n.postMessage(t,this.allowedOrigin)},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){"*"!==t.allowedOrigin&&e.origin!=t.allowedOrigin||e.data&&e.data.meta&&"request"!==e.data.meta.type&&n({message:e.data,source:e.source,context:void 0})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportClient=r},2481:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=(r=_(regeneratorRuntime.mark((function e(){var t,n,r,o,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getCurrent();case 2:if((t=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,n=void 0,r=void 0,e.prev=8,e.next=11,f.default.get("honey-checkout-app:storeCheckoutState:"+t.id);case 11:n=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),n=null;case 17:if(o=null,n){e.next=31;break}return e.next=21,O();case 21:return r=h.default.initialize(),e.next=24,p.default.getFeatureFlag(w,{ttl:E});case 24:return e.sent&&(r.deployPaypalRelay(),r.paypalFrameDetected.subscribe((function(){g.default.transition(y.States.PayPalDiscovered)}))),e.next=28,l.default.send("checkout:action",{action:c.default.CHECKOUT_GET_STORE_CONFIG,data:{storeId:t.id}},{background:!0});case 28:if((o=e.sent)&&o.config&&"SUPPORTED"===o.config.status){e.next=31;break}return e.abrupt("return");case 31:d=S("honeyCheckout"),i.default.render(a.default.createElement(m.default,{storeCheckoutConfig:o,checkoutCoordinator:r}),d),e.next=38;break;case 35:e.prev=35,e.t1=e.catch(5),u.default.error("Error loading Honey Checkout iframe: "+e.t1);case 38:case"end":return e.stop()}}),e,this,[[5,35],[8,14]])}))),function(){return r.apply(this,arguments)}),a=b(n(0)),i=b(n(46)),u=b(n(9)),s=b(n(13)),c=b(n(40)),l=b(n(8)),d=b(n(31)),f=b(n(42)),p=b(n(106)),v=b(n(916)),h=b(n(1298)),y=n(2482),g=b(y),m=b(n(894));function b(e){return e&&e.__esModule?e:{default:e}}function _(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var E=9e5,w="checkout_check_store_eligibility";function O(){var e=this;return new Promise((function(t){var n,r=v.default.events.paypalFrameDetected().subscribe((n=_(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d.default.getCurrent();case 4:if(e.sent.id===o.tabId){e.next=7;break}return e.abrupt("return");case 7:r.dispose(),t();case 9:case"end":return e.stop()}}),n,e)}))),function(e){return n.apply(this,arguments)}))}))}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=document.querySelector("#"+e);if(!n){(n=document.createElement("div")).id=e;var r=document.querySelector(t);r.appendChild(n)}return n}t.default={start:function(){setTimeout(o,0)}}},2482:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.States=void 0;var o=u(n(8)),a=u(n(11)),i=n(2483);function u(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.States={Started:"started",Ineligible:"ineligible",PayPalDiscovered:"PayPalDiscovered",PageChanged:"pageChanged",PageLoaded:"pageLoaded",NonCheckoutPageChanged:"nonCheckoutPageChanged"},l=(s(r={},c.Started,[c.PageLoaded,c.Ineligible]),s(r,c.PageLoaded,[c.PayPalDiscovered,c.PageChanged]),s(r,c.PageChanged,[c.Ineligible,c.NonCheckoutPageChanged]),s(r,c.NonCheckoutPageChanged,[c.PayPalDiscovered]),r),d=new i.StateMachine({initialState:c.Started,terminalStates:[c.Ineligible,c.PayPalDiscovered],stateTransitions:l});o.default.addListener("stores:pageview",(function(){d.transition(c.PageLoaded)})),d.terminalStateDetected.subscribe((function(){d.currentState()===c.PayPalDiscovered&&a.default.sendEvent("eca000101",{eligible:!0})})),t.default=d},2483:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateMachine=void 0;var r=n(505),o=function(){function e(e){var t=e.initialState,n=e.terminalStates,o=e.stateTransitions;this.terminalStateDetected=new r.Observable({value:{state:void 0},replay:!1}),this.state=t,this.terminalStates=n,this.stateTransitions=o}return e.prototype.transition=function(e){return this.isValidTransition(e)&&(this.state=e,this.isTerminalState()&&this.terminalStateDetected.next({state:this.state})),this.state},e.prototype.currentState=function(){return this.state},e.prototype.isValidTransition=function(e){var t=this;return!!this.stateTransitions[this.state].some((function(e){return t.terminalStates.includes(e)}))||!!this.stateTransitions[e]},e.prototype.isTerminalState=function(){return this.terminalStates.includes(this.state)},e}();t.StateMachine=o},2484:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=regeneratorRuntime.mark((function e(t,n,r){var o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,u.default.getCurrent();case 4:e.t0=e.sent;case 5:return o=e.t0,a=[c,l,d],r&&(a=r),e.next=10,Promise.all(a.map((function(e){return e(t,o)})));case 10:return i=e.sent,e.abrupt("return",i.some((function(e){return e})));case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t,n){return o.apply(this,arguments)}),i=s(n(32)),u=s(n(13));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){return e.GOLD_REWARDS&&(!t.gold||t.gold&&t.gold.activated)},l=function(e,t){return e&&(e.FIND_SAVINGS||e.GOLD_REWARDS)&&i.default.unix(t.applyCodesComplete).isAfter((0,i.default)().subtract(2,"hours"))},d=function(e){return e&&!e.FIND_SAVINGS};t.default={isFsOrGoldAndMoreThanTwoHrs:l,isNotOnFs:d,isOnGoldRewardsOrActivated:c,isPaymentsViewPrioritized:a}},2485:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=C(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:L=e.sent,M=crypto.getRandomValues(new Uint8Array(16)),A={name:"AES-CBC",iv:M};case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),s=(o=C(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k(t),e.next=3,crypto.subtle.decrypt(A,L,n);case 3:return r=e.sent,o=new TextDecoder,a=o.decode(r),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=n(0),l=x(c),d=x(n(1)),f=x(n(8)),p=x(n(11)),v=x(n(89)),h=n(494),y=x(n(53)),g=x(n(4)),m=x(n(106)),b=x(n(14)),_=x(n(21)),E=x(n(13)),w=n(1304),O=n(1305),S=x(O);function x(e){return e&&e.__esModule?e:{default:e}}function P(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function C(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var R="https://cdn.joinhoney.com/gift-cards/index.html";function k(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,o=e.length;r<o;r+=1)n[r]=e.charCodeAt(r);return t}var L=void 0,M=void 0,A=void 0;function N(e){var t,n=this,r=(t=C(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return S.default.setTarget(x.current.contentWindow,R),S.default.beginListening((function(e){return R.match(new RegExp("^("+e+")"))})),k.current=S.default.bindResponders((T(t={},O.types.extensionSendSDataEvent,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventName,r=I(t,["eventName"]),e.next=3,p.default.sendEvent(n,r);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionRemoveIFrame,U),T(t,O.types.extensionUpdateStyles,B),T(t,O.types.extensionExperimentsGetVariant,(function(e){return y.default.getVariant(e.variantName)})),T(t,O.types.extensionGetI18nMessage,(function(e){return g.default.getMessage(e.messageName)})),T(t,O.types.extensionSetIFrameAttribute,(function(e){return x.current.setAttribute(e.attributeName,e.value),!0})),T(t,O.types.extensionRemoveIFrameAttribute,(function(e){return x.current.removeAttribute(e.attributeName),!0})),T(t,O.types.extensionSetGiftCardsEnabledForUser,(function(e){return b.default.updateSetting("honeyWallet",e.enabled?1:0)})),T(t,O.types.extensionOpenLoginPrompt,(function(){return _.default.open({pathname:"/gift-cards-auth",query:{},state:{},force:!0,feature:"gift-cards-auth",surface:"popup"})})),T(t,O.types.extensionHideContentUI,(function(){return _.default.hide()})),T(t,O.types.extensionGetCartPrice,C(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getCurrent();case 2:return t=e.sent,e.next=5,(0,w.getCartPrice)(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,i)})))),T(t,O.types.extensionSetHoneyStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,v.default.local.set(n,r);case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionGetHoneyStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,v.default.local.get(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionRemoveHoneyStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,v.default.local.del(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionSetWindowLocalStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.SET_LOCAL_STORAGE_ITEM,data:{key:n,value:r}},{background:!0});case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionGetWindowLocalStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.GET_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionRemoveWindowLocalStorageItem,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:h.HONEY_PAY_NOW_MESSAGES.REMOVE_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionGQLQuery,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,f.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_QUERY,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionGQLMutation,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,s(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,f.default.send("honey-pay-now:action:gql-query",{action:h.HONEY_PAY_NOW_MESSAGES.GQL_MUTATION,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionAuth,function(){var e=C(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.authProvider,r=t.isLoginMode,o=t.isOptOut,e.t0=n,e.next="google"===e.t0?4:"apple"===e.t0?6:"paypal"===e.t0?8:"facebook"===e.t0?10:(e.t0,12);break;case 4:return r?b.default.loginGoogle():b.default.registerGoogle(o),e.abrupt("break",14);case 6:return r?b.default.loginApple():b.default.registerApple(o),e.abrupt("break",14);case 8:return r?b.default.loginPaypal():b.default.registerPaypal(o),e.abrupt("break",14);case 10:return r?b.default.loginFacebook():b.default.registerFacebook(o),e.abrupt("break",14);case 12:a=r?"login":"join",b.default.openEmailAuth(a,"ext",!1,!1);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),T(t,O.types.extensionGetUserABGroup,C(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.getUserABGroup("auth");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,i)})))),T(t,O.types.extensionGetI18nCountryCode,C(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.default.getCountryCode(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,i)})))),t)),e.next=7,crypto.subtle.exportKey("jwk",L);case 7:return n=e.sent,e.next=10,S.default.request(O.types.giftCardsInit,a({},o,{jsonRequestKey:n,requestIV:[].concat(P(M)),parentOrigin:window.location.origin}));case 10:r=e.sent,d.current=r;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),o=e.data,d=(0,c.useRef)(!1),x=(0,c.useRef)(),k=(0,c.useRef)((function(){})),A=(0,c.useRef)(document.querySelector("body")),N=(0,c.useState)(null),j=i(N,2),D=j[0],F=j[1];function U(){k.current(),S.default.stopListening(),x.current.remove()}function B(e){var t=e.visible,n=e.lockScrolling,r=e.bodyStyle,o=void 0===r?{}:r,i=e.iframeStyle,u=void 0===i?{}:i;return Object.assign(A.current.style,a({overflow:n?"hidden":"auto"},o)),Object.assign(x.current.style,a({visibility:t?"visible":"hidden"},u)),!0}return(0,c.useEffect)((function(){C(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getFeatureFlag("gift_cards_use_remote_iframe");case 2:t=e.sent,F(t);case 4:case"end":return e.stop()}}),e,n)})))()}),[]),(0,c.useEffect)((function(){return function(){return U()}}),[]),(0,c.useEffect)((function(){var e,t=(e=C(regeneratorRuntime.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n&&n.action,e.next=e.t0===h.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_MODAL_VISIBILITY?3:e.t0===h.HONEY_PAY_NOW_MESSAGES.REMOVE_PAY_NOW_IFRAME?5:7;break;case 3:return B({visible:n.data.isVisible,lockScrolling:n.data.isVisible}),e.abrupt("break",8);case 5:return U(),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)});function n(e,t){var n=t.user;S.default.request(O.types.giftCardsUserUpdate,n)}return f.default.addListener("honey-pay-now:action:ui",t),f.default.addListener("user:current:update",n),function(){f.default.removeListener("honey-pay-now:action:ui",t),f.default.removeListener("user:current:update",n)}}),[]),null===D?null:l.default.createElement("iframe",{ref:x,id:"giftcardsIFrame",title:"Honey Pay Now",src:R,className:null,style:{visibility:"hidden"},onLoad:r,scrolling:"no"})}N.propTypes={data:d.default.object},N.defaultProps={data:{}},t.default=N},2492:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1116),a=(r=o)&&r.__esModule?r:{default:r};t.default={getExtensionID:function(){return a.default.getExtensionID()},connect:function(e,t){return a.default.connect(e,t)},addOnConnectListener:function(e){return a.default.addOnConnectListener(e)},removeOnConnnectListener:function(e){return a.default.removeOnConnnectListener(e)}}},2493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unMountApp=function(e){(0,i.unmountComponentAtNode)(e)};var r,o,a=h(n(0)),i=n(46),u=n(6),s=n(28),c=n(2),l=h(n(131)),d=h(n(2494)),f=h(n(311)),p=h(n(155)),v=n(881);function h(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(){var t,n,r,o,i,h,y,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)(),n=t.plugins,(r=document.createElement("div")).style="z-index: 2147483647 !important",document.body.appendChild(r),o="closed",e.next=8,(0,p.default)(r,null,{mode:o,dontInjectFonts:!0});case 8:return i=e.sent,h=new c.SheetsRegistry,(y=(0,s.create)()).setup({plugins:n,insertionPoint:i.getElementById("honey")}),g=a.default.createElement(c.JssProvider,{registry:h,jss:y},a.default.createElement(u.Provider,{store:f.default},a.default.createElement(v.Provider,{value:{shadowContainer:r}},a.default.createElement(d.default,null)))),e.next=15,(0,p.default)(r,g,{mode:o,dontInjectFonts:!0,feature:"honey-tips",surface:"badge"});case 15:return e.abrupt("return",{shadowRoot:i});case 16:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)})},2494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=c(r),a=c(n(2495)),i=c(n(2515)),u=c(n(2530)),s=c(n(2531));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.default.createElement(r.Fragment,null,o.default.createElement(u.default,null,o.default.createElement(s.default,null,o.default.createElement(a.default,null)),o.default.createElement(i.default,null)))}},2495:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=g(n(0)),a=g(n(9)),i=n(6),u=g(n(2496)),s=g(n(2510)),c=g(n(2513)),l=n(205),d=g(n(280)),f=g(n(2514)),p=n(410),v=n(25),h=n(18),y=n(867);function g(e){return e&&e.__esModule?e:{default:e}}var m={movable:u.default,teaser:s.default,sticky_teaser:u.default,launchpad:c.default,launchpadTeaser:s.default,launchpadBadge:u.default},b="teaser",_="sticky_teaser",E="movable",w="launchpadTeaser",O="launchpadBadge",S="none";t.default=function(){var e=(0,l.useTeaser)(),t=e.teaserDisabled,n=e.showTeaser,u=void 0,s=(0,d.default)()||[],c=(0,f.default)()||!1,g=c.hasValidLaunchpadTips,x=c.hasValidLaunchpadBadgeTips,P=(0,p.useIsStickyTeaser)(),T=r(P,1)[0],I=(0,i.useSelector)(v.selectCurrentContainerId),C=((0,i.useSelector)((0,h.selectUniversalContainerById)(I))||{}).isLaunchpad;if(C&&(!s||!s.length))return null;C?g?x?u=n&&!t?w:O:(a.default.debug("\n        "+y.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(y.VALID_LAUNCHPAD_BADGE_TIPS).join(", ")+" so not showing launchpad badge"),u=S):(a.default.debug(y.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(y.VALID_LAUNCHPAD_TIPS).join(", ")+" so not showing launchpad"),u=S):u=n&&!t?T?_:b:E;var R=m[u];return R?o.default.createElement(R,{isMini:!0,isLaunchpad:C,isTeaser:n&&!t,isMiniTeaser:!0,isNotification:!1,isFullyExpandedPdp:!0,isMiniEngagement:!0}):null}},2496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=q(o),i=q(n(1)),u=n(6),s=n(2),c=n(48),l=q(n(96)),d=q(n(879)),f=q(n(4)),p=q(n(8)),v=q(n(14)),h=n(224),y=q(n(288)),g=q(n(40)),m=q(n(144)),b=q(n(410)),_=n(411),E=q(n(487)),w=n(3),O=q(n(481)),S=q(n(484)),x=q(n(1196)),P=n(26),T=n(205),I=q(n(506)),C=q(n(280)),R=q(n(221)),k=q(n(1180)),L=q(n(873)),M=q(n(2497)),A=q(n(2503)),N=q(n(502)),j=q(n(2504)),D=q(n(2505)),F=q(n(918)),U=n(33),B=q(n(919)),H=q(n(920)),G=q(n(921)),$=q(n(1311)),V=q(n(2509));function q(e){return e&&e.__esModule?e:{default:e}}function z(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var W=(0,s.createUseStyles)({middleHeader:{composes:"title1",color:w.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},containerLoader:{paddingTop:"60px",backgroundColor:w.Colors.white,display:"flex",justifyContent:"center",alignItems:"center"}}),Y=function(){var e=W();return a.default.createElement("div",{className:e.contentLoading})},X=function(e){var t=e.isMini,n=e.isMiniTeaser,i=e.isNotification,s=e.isFullyExpandedPdp,q=e.isTeaser,X=e.isLaunchpad,K=(0,u.useDispatch)(),Q=(0,o.createRef)(),J=(0,o.useRef)(),Z=(0,o.useRef)(),ee=(0,o.useRef)(),te=(0,T.useContainerState)(),ne=r(te,3),re=ne[0],oe=ne[1],ae=ne[2],ie=(0,T.useContainerOpen)(),ue=r(ie,3),se=ue[0],ce=ue[1],le=ue[2],de=(0,k.default)(),fe=r(de,2)[1],pe=(0,o.useRef)(!0),ve=(0,R.default)()||{},he=(0,U.useFeedbackMode)(),ye=r(he,3),ge=ye[0],me=ye[2],be=(0,A.default)(),_e=r(be,2),Ee=_e[0],we=_e[1],Oe=(0,C.default)()||[],Se=l.default.getTipsConfigSync().storeIds,xe=void 0===Se?[]:Se,Pe=ve.id,Te=(0,o.useMemo)((function(){return xe.every((function(e){return e!==Pe}))}),[Pe,xe]),Ie=(0,L.default)(),Ce=Ie.showBanner,Re=void 0!==Ce&&Ce,ke=Ie.copy,Le=Ie.color,Me=Ie.ctaAction,Ae=Ie.ctaCopy,Ne=(0,o.useState)(),je=r(Ne,2),De=je[0],Fe=je[1],Ue=(0,o.useState)(!1),Be=r(Ue,2),He=Be[0],Ge=Be[1],$e=(0,o.useState)(0),Ve=r($e,2),qe=Ve[0],ze=Ve[1],We=Oe.map((function(){return(0,o.createRef)()})),Ye=(0,U.useBadgeSnoozed)(),Xe=(0,U.useFullscreenTipInstance)(),Ke=W(),Qe=[],Je=(0,$.default)().startAnimation,Ze=(0,b.default)(),et=r(Ze,1)[0]===_.TIPS_EXP_ENUM.delayed_hover_or_click;(0,o.useEffect)((function(){0!==Oe.length&&(0,P.incrementSessionCount)()}),[Oe]),(0,o.useEffect)((function(){if(X){var e=g.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t={background:!0};ae&&Pe&&pe.current&&se&&z(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return pe.current=!1,n.next=3,p.default.send("honeyTips:tips",{action:e,storeId:Pe},t);case 3:case"end":return n.stop()}}),n,void 0)})))()}}),[ae,Pe,pe,ce,X,se]),(0,o.useEffect)((function(){X&&z(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ve.id){e.next=11;break}return e.next=3,Promise.all([v.default.getInfo(),v.default.getUserFollow(),v.default.getStoreSessionCount(ve.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],Fe(o),Ge(a.includes(ve.id)),ze(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[ve.id,ve.storeIcon,X]),(0,o.useEffect)((function(){var e;(e=z(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe();case 2:e.sent&&le();case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useLayoutEffect)((function(){var e=setInterval((function(){ge||Xe||Q.current&&(Z.current=Q.current.clientHeight)}),100);return function(){e&&clearInterval(e)}}));var tt,nt=(0,U.useTipInstanceFullscreen)(Xe),rt=r(nt,2)[1],ot=(0,U.useBottomSheet)(),at=r(ot,2),it=at[0],ut=void 0===it?{}:it,st=at[1],ct=(0,U.useTipInstanceBottomSheet)(ut.tipInstanceId),lt=r(ct,1)[0],dt=void 0===lt?"":lt,ft=m.default.AMAZON_STORES.includes(ve.id),pt=function(e){var t=e.touches&&e.touches[0].clientY||e.clientY;J.current=!1,we({dragging:!0,mouseTop:t})},vt=function(){we({dragging:!1})},ht=function(e){var t=e.changedTouches[0].clientY;J.current=t!==Ee.mouseTop,e.preventDefault()},yt=(tt=z(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return De&&De.isLoggedIn||v.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=He?"UNFOLLOW":"FOLLOW")?K((0,P.storeFollow)()):"UNFOLLOW"===t&&K((0,P.storeUnfollow)()),e.next=5,v.default.updateUserFollow(ve.id,De.id,t);case 5:n=e.sent,Ge(n.includes(ve.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return tt.apply(this,arguments)});if((0,o.useEffect)((function(){var e=function(){we({dragging:!1})},t=function(e){J.current=e.clientY!==Ee.mouseTop};return Ee.dragging?(et&&window.addEventListener("mousemove",t),window.addEventListener("mouseup",e)):(et&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)),function(){et&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[Ee.dragging,Ee.mouseTop,we,et]),!oe)return a.default.createElement(o.Fragment,null);var gt,mt=function(e){e&&We&&We.length>0&&We.filter((function(t){return t.current.tipId.indexOf(e)>-1}))[0].current.ref.scrollIntoView({behavior:"smooth",block:"start"})},bt=function(){return Promise.all(Qe.map((function(e){return new Promise((function(t){e&&e.scrollTo({behavior:"smooth",top:0}),t()}))})))},_t=(gt=(0,V.default)(),a.default.createElement("div",{className:Ke.containerLoader},a.default.createElement(c.ContainerLoader,{loadingImage:"https://cdn.honey.io/images/tips/coiny_happy_scientist_beakers_transparent.gif",loadingPhrases:gt,marqueeDelay:2e3}))),Et=X?!!De&&!ge&&a.default.createElement(h.StoreFollowUI,{inPopover:!1,store:ve,storeFollowButton:a.default.createElement("div",{className:Ke.followBtnOverrides},a.default.createElement(y.default,{allowTooltip:!1,isFollowing:He,isHeaderButton:!0,store:{storeId:ve.id,storeName:ve.name},storeSessionCount:qe,subSrc:"launchpad",updateUserFollow:yt,user:De}))}):null,wt=a.default.createElement(o.Fragment,null,Et,0!==Oe.length?Oe.map((function(e,t){var n=ft&&t===Oe.length-1,r=ft?"1px":"0px";return a.default.createElement(G.default,{isFullyExpandedPdp:s,key:""+e,tipInstanceId:e,fullScreenTipInstanceId:Xe},a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(F.default,null,a.default.createElement("div",{ref:function(n){!function(e,t,n){We[n]&&!We[n].current&&(We[n].current={ref:e,tipId:t})}(n,e,t)}},a.default.createElement(I.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card",scrollToCard:mt,scrollToTop:bt})))))})):_t),Ot=Xe&&a.default.createElement("div",{style:{minHeight:Z.current}},Xe?a.default.createElement(G.default,{key:""+Xe,tipInstanceId:Xe},a.default.createElement(I.default,{tipInstanceId:Xe,templateType:"fullscreen"})):a.default.createElement(c.LoaderGroup,null))||null,St=a.default.createElement(d.default,{id:dt,open:ut.isOpen,onClose:st,onTransitionEnd:function(){ut.isOpen||K((0,P.resetBottomSheet)())}},a.default.createElement(I.default,{tipInstanceId:ut.tipInstanceId,templateType:"bottomSheet"})),xt=re?a.default.createElement(Y,null):!ge&&!Xe&&wt||null,Pt=ge&&a.default.createElement("div",{style:{minHeight:Z.current}},a.default.createElement(B.default,null))||null,Tt=i&&a.default.createElement("div",{style:{position:"absolute",left:10,top:-5,zIndex:1}},a.default.createElement(x.default,null))||null,It=a.default.createElement(w.NotificationBanner,{show:Re,copy:ke,color:Le,ctaAction:Me,ctaCopy:Ae,onClose:function(){return K((0,P.resetNotificationBanner)())},src:"UniversalContainer-ConnectedMovableContainer",short:!0,stackAbove:!0,zIndex:3}),Ct=t?a.default.createElement(D.default,{dragging:Ee.dragging,dragged:J,onMouseDown:pt,onMouseUp:vt,onTouchMove:ht,snoozed:Ye,openContainer:function(){et&&we({dragging:!1}),ce()},closeContainer:le,isStaticContainer:et,isMiniTeaser:n,isTeaser:q,notificationBadge:Tt}):a.default.createElement(j.default,{dragging:Ee.dragging,dragged:J,onMouseDown:pt,onMouseUp:vt,onTouchMove:ht,snoozed:Ye,openContainer:ce,closeContainer:le}),Rt=Oe.length>0?Ct:null,kt=Te?Rt:Ct;return a.default.createElement(M.default,{position:Ee,isContainerOpen:se,dragging:Ee.dragging,onInjectionError:function(e){K((0,P.sdataTipBadgeInjectionError)(e))},isStaticContainer:et,container:a.default.createElement("div",{onMouseOver:et?function(){}:ce,onMouseLeave:et?function(){}:function(){Xe&&Xe.split(":")[1].includes("DL")?le(8e3):le()},ref:function(e){return e&&e.firstChild&&e.firstChild.firstChild&&e.firstChild.firstChild.firstChild&&e.firstChild.firstChild.firstChild.firstChild&&2===e.firstChild.firstChild.firstChild.firstChild.childNodes.length&&Qe.push(e.firstChild.firstChild.firstChild.firstChild.childNodes[1]),ee},style:{}},a.default.createElement(c.UniversalContainer,{open:se&&!Ye},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:Q},header:a.default.createElement(E.default,{leftContainer:a.default.createElement((function(){return ge?a.default.createElement("span",{onClick:me},a.default.createElement(O.default,null)):Xe?a.default.createElement("span",{onClick:rt(!1)},a.default.createElement(O.default,null)):a.default.createElement(S.default,null)}),null),middleContainer:a.default.createElement((function(){return Xe?a.default.createElement("span",{className:Ke.middleHeader},f.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(H.default,{onClick:function(){K((0,P.tipContainerActionsClose)())},onSettingsClick:function(){}})}),footer:ft&&a.default.createElement(N.default,{isContainerOpen:se})},re&&_t,It,Ot,xt,Pt,St))),badge:kt,startBadgeAnimation:Je})};X.propTypes={isMini:i.default.bool,isLaunchpad:i.default.bool,isMiniTeaser:i.default.bool,isNotification:i.default.bool,isFullyExpandedPdp:i.default.bool,isTeaser:i.default.bool},X.defaultProps={isMini:!1,isLaunchpad:!1,isMiniTeaser:!1,isNotification:!1,isFullyExpandedPdp:!1,isTeaser:!1},t.default=X},2497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=h(a),u=n(291),s=h(n(1)),c=h(n(2498)),l=h(n(917)),d=h(n(2500)),f=h(n(2501)),p=h(n(856)),v=h(n(2502));function h(e){return e&&e.__esModule?e:{default:e}}var y=void 0,g={transition:"opacity 500ms ease-in-out",opacity:1},m={transition:"opacity 0ms ease-in-out",opacity:0},b={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},_={entering:{transform:"translateX(57px)"},entered:{transform:"translateX(0px)"},exiting:{transform:"translateX(0px)"},exited:{transform:"translateX(57px)"}},E={transition:"transform 200ms ease-in-out",transform:"translateX(57px)"},w=function(e){var t=e.container,n=e.position,s=e.badge,h=e.isContainerOpen,w=e.dragging,O=e.isStaticContainer,S=e.startBadgeAnimation,x=(0,p.default)(),P=x.movableBadgeSettings,T=x.movableBadgeDefaults,I="bottomRight"===(P&&P.orientation||T&&T.orientation),C=(0,f.default)(I),R=o(C,2),k=R[0],L=R[1],M=i.default.createRef(),A=(0,a.useState)(),N=o(A,2),j=N[0],D=N[1],F=(0,a.useState)(!1),U=o(F,2),B=U[0],H=U[1],G=(0,a.useState)(!1),$=o(G,2),V=$[0],q=$[1],z=(0,a.useState)(!1),W=o(z,2),Y=W[0],X=W[1],K=(0,a.useState)(!1),Q=o(K,2),J=Q[0],Z=Q[1],ee=(0,a.useState)(!1),te=o(ee,2),ne=te[0],re=te[1];if((0,a.useEffect)((function(){var e=void 0;return h&&!w?O?X(!0):e=setTimeout((function(){q(!0)}),400):O?X(!1):q(!1),function(){e&&clearTimeout(e)}}),[h,w,O]),(0,a.useEffect)((function(){var e=document.createElement("div");document.body.appendChild(e),D(e)}),[]),(0,a.useEffect)((function(){var e=setInterval((function(){var e=M&&M.current&&M.current.getBoundingClientRect();k?e&&e.y<16?H(!0):H(!1):e&&e.bottom-16>window.innerHeight-16?H(!0):H(!1)}),10);return function(){clearInterval(e)}})),!j)return i.default.createElement(a.Fragment,null);var oe=i.default.createElement(u.Transition,{appear:!0,exit:!1,onEntered:function(){y=!0},onEntering:function(){return setTimeout(S,200)},in:!h&&s,timeout:200},(function(e){return i.default.createElement("div",{style:r({},E,_[e])},s)})),ae=i.default.createElement(u.Transition,{enter:!1,in:!h,timeout:500,onEntered:function(){re(!0)},onExiting:function(){re(!1)}},(function(e){return i.default.createElement("div",{style:r({},g,b[e],{visibility:J?"hidden":"visible"})},s)})),ie=(!O&&V||O&&Y)&&B;return i.default.createElement(a.Fragment,null,i.default.createElement(d.default,{outsideDomNode:j},i.default.createElement("div",{style:{position:"fixed",top:k?16:"unset",bottom:k?"unset":0,zIndex:"2147483647",right:"16px",display:ie?"flex":"none"}},t)),i.default.createElement(c.default,{isStaticContainer:O,setIsBottom:L,isBottom:k,position:n,ref:M},i.default.createElement("div",{style:{display:"flex",flexDirection:k?"column-reverse":"column"}},!O&&s,O&&(y?ae:oe),i.default.createElement("div",{style:{opacity:!O&&!V||O&&!Y||B?0:1,visibility:!O&&!V||O&&!Y||B?"hidden":"visible",zIndex:2,position:"relative",top:k?"unset":16,bottom:k?16:"unset",right:"16px"}},!O&&t))),O&&i.default.createElement(i.default.Fragment,null,i.default.createElement(u.Transition,{in:h,timeout:500,exit:!1,onEntered:function(){Z(!0)},onExited:function(){Z(!1)}},(function(e){return i.default.createElement("div",{style:r({position:"fixed",top:73,zIndex:"2147483647",right:360,display:"flex"},m,b[e],{visibility:ne?"hidden":"visible"})},i.default.createElement(v.default,null))})),i.default.createElement(l.default,{container:t,badge:s})))};t.default=w,w.propTypes={isContainerOpen:s.default.bool.isRequired,position:s.default.object,container:s.default.node,badge:s.default.node,dragging:s.default.bool,isStaticContainer:s.default.bool,startBadgeAnimation:s.default.func},w.defaultProps={position:{},container:void 0,badge:void 0,dragging:!0,isStaticContainer:!1,startBadgeAnimation:function(){}}},2498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=c(o),i=c(n(1)),u=c(n(2499)),s=c(n(856));function c(e){return e&&e.__esModule?e:{default:e}}var l=a.default.forwardRef((function(e,t){var n=e.position,i=e.isBottom,c=e.setIsBottom,l=e.children,d=(0,o.useRef)(!1),f=(0,o.useState)(),p=r(f,2),v=p[0],h=p[1],y=(0,s.default)(),g=y.movableBadgeSettings,m=y.updateBadgeSettings,b=y.movableBadgeDefaults,_=n.dragging,E=n.mouseTop,w=g&&g.top||b&&b.top||16,O=g&&g.bottom||b&&b.bottom||0,S=(0,o.useState)({top:w,bottom:O}),x=r(S,2),P=x[0],T=x[1],I=(0,o.useState)({diff:0}),C=r(I,2),R=C[0],k=C[1],L=(window.innerHeight-56-16)/2;(0,o.useEffect)((function(){var e=(0,u.default)((function(){var e=i?window.innerHeight-P.bottom-16-56>=L:P.top>=L;i?(T({top:window.innerHeight-P.bottom-16-56,bottom:P.bottom}),e&&c(!1)):e&&(T({top:P.top,bottom:window.innerHeight-P.top-16-56}),c(!0))}),500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[P.top,P.bottom,i,c,L]),(0,o.useEffect)((function(){var e=function(e){if(_){var t=void 0;if(i){var n=e.changedTouches&&e.changedTouches[0].clientY||e.clientY,r=window.innerHeight-n-(window.innerHeight-E),o=r+P.bottom;t=o>=16?o+56<=window.innerHeight-16?r:window.innerHeight-56-P.bottom-16:-1*P.bottom+16}else{var a=(e.changedTouches&&e.changedTouches[0].clientY||e.clientY)-E,u=a+P.top;t=u>=16?u+56<=window.innerHeight-16?a:window.innerHeight-56-P.top-16:-1*P.top+16}k({diff:t})}},t=function(t){e(t),t.preventDefault()};if(_)window.addEventListener("mousemove",e),window.addEventListener("touchmove",t);else{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t);var n=i?P.bottom+R.diff:P.top+R.diff,r=n!==v;h(n);var o=i?window.innerHeight-n-56-16:n,a=i?n:window.innerHeight-n-56-16,u=i?window.innerHeight-a-16-56>=L:o>=L;c(u),T({top:o,bottom:a}),d.current!==_&&m({top:o,bottom:a,orientation:u?"bottomRight":"topRight",sendSdata:r}),k({diff:0})}return d.current!==_&&(d.current=_),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t)}}),[_,P.top,P.bottom,R.diff,E,c,m,i,L]);var M=i?-1*R.diff:R.diff;return a.default.createElement("div",{style:{position:"fixed",top:i?"unset":P.top,bottom:i?P.bottom:"unset",right:"0px",transform:"translate(0px, "+M+"px)",zIndex:2147483647},ref:t},l)}));t.default=l,l.propTypes={isBottom:i.default.bool,setIsBottom:i.default.func,children:i.default.any,position:i.default.object},l.defaultProps={isBottom:!1,setIsBottom:function(){},children:void 0,position:{}}},2499:function(e,t,n){var r=n(476),o=n(146);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},2500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=p(o),i=p(n(1)),u=p(n(46)),s=n(2),c=p(n(131)),l=n(28),d=p(n(19)),f=n(881);function p(e){return e&&e.__esModule?e:{default:e}}var v=(0,c.default)().plugins,h=function(e){var t=e.children;return a.default.createElement("div",{id:"honey"},a.default.createElement("link",{rel:"stylesheet",href:"https://cdn.honey.io/css/honey-font.min.css?v2"}),t)};h.propTypes={children:i.default.any},h.defaultProps={children:void 0};t.default=function(e){var t=e.outsideDomNode,n=e.children,i=(0,o.useState)(),c=r(i,2),p=c[0],y=c[1],g=(0,o.useState)(),m=r(g,2),b=m[0],_=m[1],E=(0,o.useState)(),w=r(E,2),O=w[0],S=w[1],x=(0,o.useState)(),P=r(x,2),T=P[0],I=P[1];if((0,o.useEffect)((function(){var e=document.createElement("div");_(e)}),[]),(0,o.useEffect)((function(){if(b){var e=!!b.attachShadow&&"function attachShadow() { [native code] }"===b.attachShadow.toString(),t=e?b.attachShadow({mode:"closed"}):b;e&&(0,d.default)(b).data("_honeyShadowRoot",t),y(t)}}),[b]),(0,o.useEffect)((function(){return t&&b&&t.appendChild(b),function(){t&&b&&t.removeChild(b)}}),[t,b]),(0,o.useEffect)((function(){}),[p]),(0,o.useEffect)((function(){if(p){var e=new s.SheetsRegistry;S(e);var t=(0,l.create)();t.setup({plugins:v,insertionPoint:p.querySelector("#honey")}),I(t)}}),[p]),p&&T&&O){var C=a.default.createElement(s.JssProvider,{jss:T},n);return u.default.createPortal(a.default.createElement(h,null,a.default.createElement(f.Provider,{value:{shadowContainer:b}},C)),p)}return p?u.default.createPortal(a.default.createElement(h,null),p):a.default.createElement(o.Fragment,null)}},2501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.useState)(e)};var r=n(0)},2502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(404)),a=n(6),i=n(26);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,a.useDispatch)();return r.default.createElement("div",{style:{cursor:"pointer "},onMouseUp:function(){e((0,i.tipContainerActionsClose)())}},r.default.createElement(o.default,null))}},2503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.useState)({mouseTop:0,dragging:!1})};var r=n(0)},2504:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=L(o),i=L(n(1)),u=n(6),s=n(3),c=L(n(876)),l=L(n(1193)),d=L(n(1194)),f=L(n(1195)),p=L(n(1192)),v=L(n(482)),h=L(n(1190)),y=L(n(1208)),g=L(n(1205)),m=L(n(37)),b=L(n(4)),_=L(n(14)),E=L(n(96)),w=L(n(872)),O=n(870),S=n(480),x=n(205),P=L(n(1309)),T=L(n(863)),I=n(26),C=n(861),R=n(1310),k=L(R);function L(e){return e&&e.__esModule?e:{default:e}}function M(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var A={openContainer:i.default.func,closeContainer:i.default.func,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTouchMove:i.default.func,isStaticContainer:i.default.bool},N=function(e){var t=e.openContainer,n=e.closeContainer,i=e.onMouseDown,L=e.dragging,A=e.dragged,N=e.isStaticContainer,j=(0,o.createRef)(),D=(0,u.useDispatch)(),F=(0,o.useState)(),U=r(F,2),B=U[0],H=U[1],G=(0,o.useState)(),$=r(G,2),V=$[0],q=$[1],z=(0,o.useState)(!1),W=r(z,2),Y=W[0],X=W[1],K=(0,k.default)({isStaticContainer:N}),Q=r(K,2),J=Q[0],Z=Q[1],ee=(0,o.useState)(!1),te=r(ee,2),ne=te[0],re=te[1],oe=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),ae=r(oe,2),ie=ae[0],ue=ae[1],se=(0,o.useState)(!1),ce=r(se,2),le=ce[0],de=ce[1],fe=(0,o.useState)(""),pe=r(fe,2),ve=pe[0],he=pe[1],ye=(0,x.useContainerState)(),ge=r(ye,3)[2],me=(0,o.useState)(!1),be=r(me,2),_e=be[0],Ee=be[1],we=(0,P.default)(),Oe=we.shouldShowTooltip,Se=we.forceHideTooltip,xe=we.startClickBadgeTooltip,Pe=we.endClickBadgeTooltip,Te=(0,T.default)({isStaticContainer:N}).shouldShowToolTip,Ie=(0,w.default)().id,Ce=(0,S.useTip)(Ie),Re=r(Ce,1)[0].badge,ke=void 0===Re?{}:Re,Le=ke.title,Me=ke.subtitle,Ae=(0,O.useCategoryData)(Ie),Ne=r(Ae,1)[0],je=function(){var e=(0,o.useState)(!1),t=r(e,2),n=t[0],a=t[1],i=(0,o.useState)(!1),u=r(i,2),s=u[0],c=u[1],l=(0,o.useRef)(!1);return[n,function(){n||a(!0),c(!0),clearTimeout(l.current)},function(){s&&(c(!1),l.current=setTimeout((function(){a(!1)}),600))}]}(),De=r(je,3),Fe=De[0],Ue=De[1],Be=De[2],He=Fe&&!L;(0,o.useEffect)((function(){L||de(!1)}),[L]),(0,o.useEffect)((function(){var e=setInterval((function(){var e=j&&j.current&&j.current.getBoundingClientRect();(e?e.y+e.height/2:0)>=window.innerHeight/2?Ee(!0):Ee(!1)}),10);return function(){clearInterval(e)}})),(0,o.useEffect)((function(){D((0,I.badgeShown)())}),[D]),(0,o.useEffect)((function(){var e;(e=M(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,he(n||a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",lineHeight:"16px"}},b.default.getMessage("New_Shop_smarter_with_Honey_Tips_Badge_blocking_your_view_Just_drag_it_up_or_down"),a.default.createElement("div",null,a.default.createElement("img",{style:{width:"100%"},src:"https://cdn.honey.io/images/tips/movable-badge-example.gif",alt:"Gif of example"})))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){var e;(e=M(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,_.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,r&&X(!0),re(s),ue(a.featureSettings||ie);case 15:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[ie]);var Ge=function(){N&&xe(),B||e.dragging||(m.default.updateSetting("movable_badge:first_time_hovered","true"),D((0,I.badgeHover)()),t(),H(!0))},$e=function(){if(!A.current){if(V)return n(),void q(!1);Se(),m.default.updateSetting("movable_badge:first_time_clicked","true"),D((0,I.badgeClick)()),t(),q(!0)}};if((0,o.useEffect)((function(){Oe&&ge&&D((0,I.clickBadgeTooltipShown)())}),[D,Oe,ge]),(0,o.useEffect)((function(){if(null!==Z&&N){var t=Z.event;t===R.hoverOrClickEvents.MOUSEUP?($e(),e.onMouseUp()):t===R.hoverOrClickEvents.MOUSEOVER&&Ge()}}),[Z]),e.snoozed)return a.default.createElement(o.Fragment,null);var Ve=function(t){e.onMouseUp(t),$e(),t.preventDefault()},qe=a.default.createElement("span",null,b.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,b.default.getMessage("No_tips"))})),ze=L&&le?"Click to pin this badge":("function"==typeof Le?Le(Ne):Le)||qe,We=L&&le?"Move your cursor to position":("function"==typeof Me?Me(Ne):Me)||b.default.getMessage("But_were_working_on_it"),Ye=[{copy:"Reposition this",key:"reposition_this",onClick:function(e){de(!0),i(e),D((0,I.setClickMove)())}},{copy:b.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){D((0,I.setBadgeSnoozeOneDay)())}}],Xe=ne?{copy:b.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){D((0,C.setBadgeSnoozeAllLoggedIn)()),window.open(ie)}}:{copy:b.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){D((0,I.setBadgeSnoozeAll)())}};Y&&Ye.push({copy:b.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){D((0,I.setBadgeSnoozeOneStore)())}},Xe);var Ke=-10-24*Ye.length,Qe=_e?Ke+"px":"64px";if(e.snoozed)return a.default.createElement(o.Fragment,null);var Je=b.default.getMessage("Droplist_this_item"),Ze=b.default.getMessage("Get_price_drop_alerts");return a.default.createElement("div",{ref:j},a.default.createElement(g.default,{showDropDown:He,settingsOptions:Ye,onMouseOver:Ue,onMouseLeave:Be,offset:Qe},a.default.createElement(y.default,null,a.default.createElement("div",{style:{position:"relative",top:"-0px"}},Te&&a.default.createElement(c.default,{copy:ve})),ge&&!Te&&Oe&&a.default.createElement("div",{style:{position:"relative",top:"-0px"}},a.default.createElement(c.default,{copy:b.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{ref:J},a.default.createElement(l.default,{onFocus:function(){},onMouseOver:N?function(){}:Ge,onMouseLeave:function(){Pe(),N&&n(),H(!1)},onTouchStart:N?function(t){e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:N?Ve:function(){},onTouchCancel:N?Ve:function(){},onTouchMove:N?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},a.default.createElement(d.default,null,a.default.createElement(s.Icon,{icon:"honey-18",color:s.Colors.white})),a.default.createElement(f.default,{firstLine:ge?ze:Je,secondLine:ge?We:Ze}))),a.default.createElement(p.default,{onMouseOver:Ue,onMouseLeave:Be,onClick:function(){D((0,I.setBadgeSnooze)())}},a.default.createElement(v.default,null)),a.default.createElement(h.default,null))))};N.propTypes=A,N.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},snoozed:!1,isStaticContainer:!1},t.default=N},2505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=j(o),i=j(n(1)),u=n(6),s=n(2),c=j(n(4)),l=j(n(96)),d=n(3),f=j(n(876)),p=j(n(874)),v=j(n(875)),h=j(n(37)),y=j(n(404)),g=j(n(872)),m=n(870),b=j(n(221)),_=n(480),E=n(205),w=j(n(1179)),O=j(n(1142)),S=j(n(863)),x=n(399),P=n(63),T=j(n(1309)),I=j(n(506)),C=j(n(410)),R=n(411),k=j(n(2506)),L=n(403),M=j(n(2507)),A=n(1310),N=j(A);function j(e){return e&&e.__esModule?e:{default:e}}function D(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var F={isMiniTeaser:i.default.bool.isRequired,openContainer:i.default.func,closeContainer:i.default.func,isStaticContainer:i.default.bool,isTeaser:i.default.bool,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTouchMove:i.default.func,notificationBadge:i.default.node},U=(0,s.createUseStyles)({root:{width:"100%",display:"flex",justifyContent:"flex-end",userSelect:"none"},loader:{width:"128px",height:"9px",display:"inline-block",background:"linear-gradient(92.25deg, #E6E6E6 2.21%, rgba(238, 238, 238, 0) 107.89%)",borderRadius:"1px"},container:function(e){var t=e.showMovableBadge;return{position:"relative",display:"flex",transition:"margin-right 300ms cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.18)",borderRadius:"5px 0px 0px 5px",alignItems:"center",cursor:e.isStaticContainer?"pointer":"move",marginRight:t?"0px":"-28px",touchAction:"none",background:d.Colors.white}},teaserAnimateIn:function(e){return{right:"1px",maxWidth:e.animateTeaserIn?"1000px":"0",transition:"max-width 800ms cubic-bezier(0.4, 0, 0.2, 1)"}}}),B=function(e){var t=e.openContainer,n=e.closeContainer,i=e.isMiniTeaser,s=e.notificationBadge,j=e.isStaticContainer,F=e.isTeaser,B=(0,o.useRef)({}),H=(0,o.useRef)(!0),G=(0,u.useDispatch)(),$=(0,o.useState)(),V=r($,2),q=V[0],z=V[1],W=(0,N.default)({isStaticContainer:j}),Y=r(W,2),X=Y[0],K=Y[1],Q=(0,E.useContainerOpen)(),J=r(Q,1)[0],Z=(0,o.useState)(),ee=r(Z,2),te=ee[0],ne=ee[1],re=(0,o.useState)(""),oe=r(re,2),ae=oe[0],ie=oe[1],ue=(0,o.useState)(!1),se=r(ue,2),ce=se[0],le=se[1],de=(0,E.useContainerState)(),fe=r(de,3)[2],pe=(0,o.useState)(!1),ve=r(pe,2),he=ve[0],ye=ve[1],ge=(0,o.useState)(!1),me=r(ge,2),be=me[0],_e=me[1],Ee=(0,w.default)(),we=(0,S.default)({isStaticContainer:j}),Oe=we.shouldShowTooltip,Se=we.incrementTooltipCount,xe=we.forceCloseTooltip,Pe=(0,T.default)(),Te=Pe.shouldShowTooltip,Ie=Pe.forceHideTooltip,Ce=Pe.startClickBadgeTooltip,Re=Pe.endClickBadgeTooltip,ke=(0,b.default)(),Le=(0,C.default)(),Me=r(Le,1)[0]!==R.TIPS_EXP_ENUM.control,Ae=U({animateTeaserIn:he,showMovableBadge:q||e.dragging,isStaticContainer:j}),Ne=(0,g.default)().id,je=(0,_.useTip)(Ne),De=r(je,1)[0],Fe=De.badge,Ue=void 0===Fe?{}:Fe,Be=De.teaser,He=void 0===Be?{}:Be,Ge=Ue.title,$e=Ue.subtitle,Ve=He.title,qe=He.CTA,ze=(0,m.useCategoryData)(Ne),We=r(ze,1)[0],Ye=ke&&ke.standDown&&ke.standDownValue>2,Xe=(0,O.default)(Ne),Ke=r(Xe,1)[0],Qe=a.default.createElement("span",null,c.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,c.default.getMessage("No_tips"))})),Je=("function"==typeof Ge?Ge(We):Ge)||Qe,Ze=("function"==typeof $e?$e(We):$e)||c.default.getMessage("But_were_working_on_it"),et=("function"==typeof Ve?Ve(We):Ve)||Je,tt=("function"==typeof qe?qe(We):qe)||Ze;(0,o.useEffect)((function(){return function(){H.current=!1}}),[]),(0,o.useEffect)((function(){if(Ee&&s&&H.current){var e=Object.values(Ee).includes("unread");_e(e)}}),[Ee]),(0,o.useEffect)((function(){!Oe&&Te&&fe&&G((0,x.clickBadgeTooltipShown)())}),[G,Te,fe,Oe]),(0,o.useEffect)((function(){if(fe&&Ye){var e={type:"standdown",standDownType:ke.standDown,standDownValue:ke.standDownValue};G((0,P.sdataTipBadgeTeaserSuppressedEvent)({suppressedReason:e}))}}),[ke.standDown,ke.standDownValue,Ye,fe,G]),(0,o.useEffect)((function(){var e;(e=D(regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,k.default)();case 4:if(t=e.sent,n=r(t,1),o=n[0],fe&&!J){e.next=9;break}return e.abrupt("return");case 9:if(!ce){e.next=12;break}return o&&le(!1),e.abrupt("return");case 12:if(!F){e.next=17;break}return G((0,x.stickyTeaserShown)()),G((0,L.tipShown)(Ne,!0)),le(!o),e.abrupt("return");case 17:!Ye&&Ke&&!Oe&&!ce&&!o&&(le(!0),G((0,x.miniBadgeTeaserShown)()));case 19:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[fe,ce,J,Ye,Ke,Oe,G,F,Ne]),(0,o.useEffect)((function(){var e;(e=D(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,ie(a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",color:d.Colors.white,lineHeight:"16px"}},n||c.default.getMessage("Check_Honey_Tips_before_you_buy_See_deal_insights_price_changes_and_add_items_to_your_Droplist"))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){fe&&ye(!0)}),[fe]),(0,o.useEffect)((function(){G((0,x.badgeShown)())}),[G]),(0,o.useEffect)((function(){return fe&&!F&&(he?B.current=setTimeout((function(){ye(!1)}),5e3):clearTimeout(B.current)),function(){clearTimeout(B.current)}}),[he,fe,F]),(0,o.useEffect)((function(){ne(j?J:void 0)}),[J,j]);var nt=function(){B&&B.current&&clearTimeout(B.current)},rt=(0,o.useCallback)((function(){Se(!1),xe()}),[Se,xe]),ot=(0,o.useCallback)((function(){rt(),j&&!J&&Ce(),nt(),q||e.dragging||(h.default.updateSetting("movable_badge:first_time_hovered","true"),G((0,x.badgeHover)()),t(),z(!0))}),[rt,G,q,J,j,t,e.dragging,Ce]),at=(0,o.useCallback)((function(){Re(),e.dragging||ye(!1),!j&&n(2e3),z(!1)}),[n,Re,j,e.dragging]),it=function(){if(clearTimeout(B.current),!e.dragged.current){if(te)return n(j?0:null),void ne(!1);ye(!1),ne(!0),Ie(),requestAnimationFrame(t),G((0,x.badgeClick)()),h.default.updateSetting("movable_badge:first_time_clicked","true")}},ut=function(t){e.onMouseUp(t),it(),t.preventDefault()};if((0,o.useEffect)((function(){if(null!==K&&j){var t=K.event;t===A.hoverOrClickEvents.MOUSEUP?(it(),e.onMouseUp()):t===A.hoverOrClickEvents.DELAYED_MOUSEENTER?ot():t===A.hoverOrClickEvents.MOUSEENTER&&nt()}}),[K]),e.snoozed)return a.default.createElement(o.Fragment,null);var st=a.default.createElement("div",{className:Ae.loader}),ct=ce&&fe&&Ne?a.default.createElement(I.default,{isTeaser:!0,onClose:function(){return ye(!1)},tipInstanceId:Ne,templateType:"teaser"}):null,lt=ce?a.default.createElement(v.default,{firstLine:fe?a.default.createElement("div",{style:{fontWeight:"700"}},et):st,secondLine:fe?a.default.createElement("div",{style:{fontWeight:"500"}},tt):st}):null,dt=Me?ct:lt;return a.default.createElement("div",{className:Ae.root},a.default.createElement("div",{ref:X,className:Ae.container,onMouseOver:j?function(){}:ot,onMouseLeave:at,onTouchStart:j?function(t){rt(),e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:j?ut:function(){},onTouchCancel:j?ut:function(){},onTouchMove:j?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},fe&&Te&&a.default.createElement("div",{style:{position:"absolute",zIndex:1}},a.default.createElement(f.default,{copy:c.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{style:{position:"absolute",zIndex:1}},Oe&&a.default.createElement(f.default,{copy:ae})),be&&s,j?a.default.createElement(M.default,null):a.default.createElement(y.default,null),i&&!(j&&J)&&a.default.createElement("div",{className:Ae.teaserAnimateIn}," ",dt," "),a.default.createElement(p.default,null)))};B.propTypes=F,B.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},isStaticContainer:!1,isTeaser:!1,snoozed:!1,notificationBadge:null},t.default=B},2506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(171)),o=n(312),a=i(n(64));function i(e){return e&&e.__esModule?e:{default:e}}var u,s,c=void 0,l=void 0,d=void 0,f=!1,p=(u=regeneratorRuntime.mark((function e(){var t,n,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.getIsProductPage)()){e.next=2;break}return e.abrupt("return",[!1]);case 2:return e.next=4,(0,r.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(t=e.t0,n=t.parentId,a=new URL(document.URL),i=a.pathname,u=a.search,s=void 0!==l&&l===n&&(c!==i||d!==u),!f){e.next=13;break}return e.abrupt("return",[!0]);case 13:if(!s){e.next=16;break}return f=!0,e.abrupt("return",[!0]);case 16:return c=i,d=u,l=n,e.abrupt("return",[!1]);case 20:case"end":return e.stop()}}),e,void 0)})),s=function(){var e=u.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return s.apply(this,arguments)});(0,a.default)("honeyTips:resetCurrent")((function(){f=!1})),(0,a.default)("honeyTips:newPage")((function(){f=!1})),(0,a.default)("honeyTips:turnOff")((function(){f=!1})),(0,a.default)("honeyTips:updateLaunchpad")((function(){f=!1})),(0,a.default)("honeyTips:updateProduct")((function(){f=!1})),t.default=p},2507:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=f(a),u=f(n(1)),s=n(2),c=n(291),l=n(1311),d=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,s.createUseStyles)({root:{display:"flex"},container:{width:"58px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px 0px 0px 5px",position:"relative",background:"linear-gradient(90deg, #FF7227 0%, #FC973B 100%)"},logoContainer:{display:"inherit"},icon:{width:"24px",height:"24px"},mask:{position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}}),v=function(e){var t=e.duration,n=p(),u=(0,a.useState)(!1),s=o(u,2),f=s[0],v=s[1],h=(0,a.useRef)(!0),y=(0,d.default)(),g=y.animate,m=y.endAnimation,b=l.BadgeAnimationState.END===g?0:t,_={transition:"opacity "+b+"ms ease-in-out",opacity:0},E={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};(0,a.useEffect)((function(){(g===l.BadgeAnimationState.START||g===l.BadgeAnimationState.END&&h.current)&&(v(!0),h.current=!1)}),[g]);var w=i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:n.mask}),i.default.createElement("img",{src:"https://cdn.honey.io/images/tips/honey-24.svg",alt:"Honey Icon"})),O=i.default.createElement(c.Transition,{onEntered:function(){return setTimeout(m,b)},exit:!1,in:f,timeout:b},(function(e){return i.default.createElement("div",{className:n.logoContainer,style:r({},_,E[e])},w)}));return i.default.createElement("div",{ref:h,className:n.root},i.default.createElement("div",{className:n.container},O))};v.propTypes={duration:u.default.number},v.defaultProps={duration:400},t.default=v},2508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36),o=n(38),a=n(43);t.default=function(e){return function(t,n){var i=n(),u={id:i&&i.universalContainer&&i.universalContainer.currentContainerId,badgeAnimationState:e},s=(0,r.normalize)(u,o.UNIVERSAL_CONTAINER);t({type:a.BADGE_ANIMATION_STATE,data:s})}}},2509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){u||(u=i.loadingPhrases.map((function(e){return a.default.getMessage(e)})));return u};var r,o=n(4),a=(r=o)&&r.__esModule?r:{default:r},i=n(1140);var u=void 0},2510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=$(o),i=n(6),u=n(2),s=$(n(1)),c=n(48),l=$(n(879)),d=$(n(4)),f=$(n(8)),p=$(n(9)),v=$(n(37)),h=$(n(40)),y=$(n(14)),g=n(224),m=$(n(288)),b=$(n(144)),_=$(n(487)),E=n(3),w=$(n(481)),O=$(n(484)),S=n(26),x=n(205),P=$(n(506)),T=$(n(280)),I=$(n(221)),C=$(n(1183)),R=$(n(917)),k=$(n(502)),L=$(n(918)),M=$(n(1312)),A=$(n(478)),N=n(33),j=$(n(873)),D=$(n(479)),F=$(n(919)),U=$(n(920)),B=$(n(921)),H=$(n(2511)),G=$(n(2512));function $(e){return e&&e.__esModule?e:{default:e}}function V(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var q=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:E.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},seeMore:{marginTop:"1px"}}),z=function(){var e=q();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(E.LoadingIcon,null))},W=function(e){var t=e.isFullyExpandedPdp,n=e.isLaunchpad,u=e.isMiniEngagement,s=(0,i.useDispatch)(),$=(0,o.useRef)(),W=(0,o.useRef)(),Y=(0,o.useState)(!1),X=r(Y,2),K=X[0],Q=X[1],J=(0,o.useState)(!1),Z=r(J,2),ee=Z[0],te=Z[1],ne=(0,x.useContainerState)(),re=r(ne,1)[0],oe=(0,x.useContainerOpen)(),ae=r(oe,2),ie=ae[0],ue=ae[1],se=(0,A.default)(),ce=r(se,3),le=ce[0],de=ce[2],fe=(0,T.default)()||[],pe=(0,N.useShowMoreTips)(),ve=n||pe?fe:fe.slice(0,1),he=(0,C.default)(),ye=(0,j.default)(),ge=ye.showBanner,me=void 0!==ge&&ge,be=ye.copy,_e=ye.color,Ee=ye.ctaAction,we=ye.ctaCopy,Oe=(0,o.useState)(),Se=r(Oe,2),xe=Se[0],Pe=Se[1],Te=(0,o.useState)(!1),Ie=r(Te,2),Ce=Ie[0],Re=Ie[1],ke=(0,o.useState)(0),Le=r(ke,2),Me=Le[0],Ae=Le[1],Ne=(0,o.useRef)(ve.map((function(){return(0,o.createRef)()}))),je=(0,D.default)(),De=(0,N.useTipInstanceFullscreen)(je),Fe=r(De,2)[1],Ue=(0,N.useBottomSheet)(),Be=r(Ue,2),He=Be[0],Ge=void 0===He?{}:He,$e=Be[1],Ve=(0,N.useTipInstanceBottomSheet)(Ge.tipInstanceId),qe=r(Ve,1)[0],ze=void 0===qe?"":qe,We=(0,I.default)()||{},Ye=b.default.AMAZON_STORES.includes(We.id),Xe=q(),Ke=(0,o.useRef)(!0),Qe=(0,o.useRef)(!0);(0,o.useEffect)((function(){n&&V(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!We.id){e.next=11;break}return e.next=3,Promise.all([y.default.getInfo(),y.default.getUserFollow(),y.default.getStoreSessionCount(We.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],Pe(o),Re(a.includes(We.id)),Ae(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[We.id,We.storeIcon,n]),(0,o.useEffect)((function(){f.default.addListener("honeyTips:tips",(function(e,t){var n=t.action,r=t.closePromptShown;n!==h.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT_DONE||r||te(!0)}))}),[]),(0,o.useEffect)((function(){if(Ke.current&&!re){if(n){var e=h.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=We&&We.id,r={background:!0};Qe.current&&V(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Qe.current=!1,n.next=3,f.default.send("honeyTips:tips",{action:e,storeId:t},r);case 3:case"end":return n.stop()}}),n,void 0)})))()}ue()}Ke.current=!1}),[re,ue,ie,n,We]);var Je,Ze,et,tt=(Je=V(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.send("honeyTips:tips",{action:h.default.SET_TEASER_CLOSED_PROMPT_SHOWN},{background:!0});case 2:s((0,S.promptShown)());case 3:case"end":return e.stop()}}),e,void 0)}))),function(){return Je.apply(this,arguments)}),nt=(Ze=V(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u){e.next=4;break}return p.default.debug("honeyTips:connectedTeaserContainer: closed teaser in non-prompt variant"),s((0,S.closeTeaser)()),e.abrupt("return");case 4:return p.default.debug("honeyTips:connectedTeaserContainer: closed teaser in prompt variant"),ee||f.default.send("honeyTips:tips",{action:h.default.INCREMENT_TEASER_CLOSED_WITHOUT_CTA_COUNT},{background:!0}),e.next=8,f.default.send("honeyTips:tips",{action:h.default.GET_TEASER_CLOSED_SHOULD_SHOW_PROMPT},{background:!0});case 8:e.sent&&!K?(Q(!0),tt(),f.default.send("honeyTips:tips",{action:h.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT,closePromptShown:!0},{background:!0}),s((0,S.closeTeaserSdataOnly)())):s(K?(0,S.closePrompt)():(0,S.closeTeaser)());case 10:case"end":return e.stop()}}),e,void 0)}))),function(){return Ze.apply(this,arguments)}),rt=(et=V(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe&&xe.isLoggedIn||y.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=Ce?"UNFOLLOW":"FOLLOW")?s((0,S.storeFollow)()):"UNFOLLOW"===t&&s((0,S.storeUnfollow)()),e.next=5,y.default.updateUserFollow(We.id,xe.id,t);case 5:n=e.sent,Re(n.includes(We.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return et.apply(this,arguments)});(0,o.useEffect)((function(){void 0!==he&&he&&s((0,S.updateShowMoreTips)({showMoreTips:!0}))}),[he]);var ot=function(e){e&&Ne.current&&Ne.current.length>0&&Ne.current.filter((function(t){return t.tipId.indexOf(e)>-1}))[0].ref.scrollIntoView({behavior:"smooth",block:"nearest"})},at=function(){$.current.scrollTo({behavior:"smooth",top:0})},it=re&&a.default.createElement(c.LoaderGroup,null)||null,ut=n?!!xe&&!le&&a.default.createElement(g.StoreFollowUI,{inPopover:!1,store:We,storeFollowButton:a.default.createElement("div",{className:Xe.followBtnOverrides},a.default.createElement(m.default,{allowTooltip:!1,isFollowing:Ce,isHeaderButton:!0,store:{storeId:We.id,storeName:We.name},storeSessionCount:Me,subSrc:"launchpad",updateUserFollow:rt,user:xe}))}):null,st=a.default.createElement(o.Fragment,null,ut,0!==ve.length&&ve.map((function(e,r){var o=!pe&&!n||Ye&&r===ve.length-1,i=Ye?"1px":"0px";return a.default.createElement(B.default,{isFullyExpandedPdp:t,key:""+e,tipInstanceId:e},a.default.createElement("div",{key:e,style:{marginBottom:o?i:"8px"}},a.default.createElement(L.default,null,a.default.createElement("div",{ref:function(t){Ne.current[r]={ref:t,tipId:e}}},a.default.createElement(P.default,{isTeaser:!0,hideCaret:!0,isSecondary:r>0,tipInstanceId:e,templateType:"card",scrollToTop:at,scrollToCard:ot})))))})));K&&(st=a.default.createElement(H.default,{onClosePromptConfirm:function(){s((0,S.closePromptConfirm)())},onClosePromptDisable:function(){v.default.updateSetting("autopopsDisabled",!0),s((0,S.closePromptDisable)())}}));var ct=je&&a.default.createElement("div",{style:{minHeight:W.current}},je?a.default.createElement(B.default,{key:""+je,tipInstanceId:je},a.default.createElement(P.default,{tipInstanceId:je,templateType:"fullscreen"})):a.default.createElement(M.default,{yOffset:"45%"}))||null,lt=re?a.default.createElement(z,null):!le&&!je&&st||null,dt=le&&a.default.createElement("div",{style:{minHeight:W.current}},a.default.createElement(F.default,null))||null,ft=a.default.createElement(l.default,{id:ze,open:Ge.isOpen,onClose:$e,onTransitionEnd:function(){Ge.isOpen||s((0,S.resetBottomSheet)())}},a.default.createElement(P.default,{tipInstanceId:Ge.tipInstanceId,templateType:"bottomSheet"})),pt=a.default.createElement(E.NotificationBanner,{show:me,copy:be,color:_e,ctaAction:Ee,ctaCopy:we,onClose:function(){return s((0,S.resetNotificationBanner)())},src:"UniversalContainer-ConnectedTeaserContainer",short:!0,stackAbove:!0,zIndex:3}),vt=a.default.createElement(k.default,{isContainerOpen:ie}),ht=!K&&!pe&&!n&&fe.length>1?a.default.createElement("div",{className:Xe.seeMore},a.default.createElement(G.default,{onClick:function(){return s((0,S.updateShowMoreTips)({showMoreTips:!pe}))}})):"",yt=Ye?vt:ht;return a.default.createElement(R.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(c.UniversalContainer,{open:ie},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:$},header:a.default.createElement(_.default,{leftContainer:a.default.createElement((function(){return le?a.default.createElement("span",{onClick:de},a.default.createElement(w.default,null)):je?a.default.createElement("span",{onClick:Fe(!1)},a.default.createElement(w.default,null)):a.default.createElement(O.default,null)}),null),middleContainer:a.default.createElement((function(){return je?a.default.createElement("span",{className:Xe.middleHeader},d.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(U.default,{onClick:nt})}),footer:yt},it,pt,ct,lt,dt,ft)))})};W.propTypes={isFullyExpandedPdp:s.default.bool,isLaunchpad:s.default.bool,isMiniEngagement:s.default.bool},W.defaultProps={isFullyExpandedPdp:!1,isLaunchpad:!1,isMiniEngagement:!1},t.default=W},2511:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),o=c(n(4)),a=c(n(1)),i=n(2),u=n(48),s=n(3);function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.createUseStyles)({container:{margin:"24px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center"},title:{composes:"title3",marginBottom:"8px"},description:{fontSize:"14px",marginBottom:"16px"},hideText:{composes:"link3",color:s.Colors.grey600,marginTop:"16px",cursor:"pointer"}}),d=function(e){var t=e.onClosePromptConfirm,n=e.onClosePromptDisable,a=l();return r.default.createElement(u.Card,null,r.default.createElement("div",{className:a.container},r.default.createElement("div",{className:a.title},o.default.getMessage("Want_to_stay_in_the_know")),r.default.createElement("div",{className:a.description},o.default.getMessage("These_Honey_Tips_are_realtime_deal_alerts_Even_if_you_hide_alerts_you_can_still_find_them_by_clicking_the_Honey_icon_on_the_right")),r.default.createElement(s.Button,{id:"TIPS:TeaserClosePrompt",size:40,buttonType:"secondary",copy:o.default.getMessage("Yes_Keep_Showing_Me_Tips"),isFlexible:!0,onClick:t}),r.default.createElement("div",{className:a.hideText,onClick:n},o.default.getMessage("No_Hide_Tip_Alerts"))))};d.propTypes={onClosePromptConfirm:a.default.func.isRequired,onClosePromptDisable:a.default.func.isRequired},t.default=d},2512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),o=c(n(1)),a=n(6),i=c(n(4)),u=c(n(1186)),s=n(403);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.onClick,n=(0,a.useDispatch)();return r.default.createElement(u.default,{body:i.default.getMessage("View_More_Tips"),onClick:function(){n((0,s.clickSeeMoreTips)()),t(!0)}})};l.propTypes={onClick:o.default.func},l.defaultProps={onClick:null},t.default=l},2513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=N(o),i=n(6),u=n(2),s=n(48),c=N(n(4)),l=N(n(8)),d=N(n(144)),f=N(n(40)),p=n(224),v=N(n(288)),h=N(n(14)),y=N(n(487)),g=n(3),m=N(n(481)),b=N(n(484)),_=n(26),E=n(205),w=N(n(506)),O=N(n(280)),S=N(n(221)),x=N(n(917)),P=N(n(502)),T=N(n(918)),I=N(n(1312)),C=N(n(478)),R=n(1178),k=N(n(479)),L=N(n(919)),M=N(n(920)),A=N(n(921));function N(e){return e&&e.__esModule?e:{default:e}}function j(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var D=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:g.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},launchpadHeader:{borderBottom:"1px solid",borderBottomColor:g.Colors.grey50}}),F=function(){var e=D();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(g.LoadingIcon,null))},U=function(){var e=(0,i.useDispatch)(),t=D(),n=(0,o.useRef)(),u=(0,o.useRef)(),g=(0,o.useState)(!0),N=r(g,1)[0],U=(0,E.useContainerState)(),B=r(U,2),H=B[0],G=B[1],$=(0,E.useContainerOpen)(),V=r($,2),q=V[0],z=V[1],W=(0,C.default)(),Y=r(W,3),X=Y[0],K=Y[1],Q=Y[2],J=(0,O.default)()||[],Z=J.slice(0,4),ee=(0,k.default)(),te=(0,R.useTipInstanceFullscreen)(ee),ne=r(te,2)[1],re=(0,S.default)()||{},oe=d.default.AMAZON_STORES.includes(re.id),ae=(0,o.useState)(),ie=r(ae,2),ue=ie[0],se=ie[1],ce=(0,o.useState)(!1),le=r(ce,2),de=le[0],fe=le[1],pe=(0,o.useState)(!1),ve=r(pe,2),he=ve[0],ye=ve[1],ge=(0,o.useState)(0),me=r(ge,2),be=me[0],_e=me[1],Ee=(0,o.useRef)(!0);(0,o.useEffect)((function(){j(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!re.id){e.next=11;break}return e.next=3,Promise.all([h.default.getInfo(),h.default.getUserFollow(),h.default.getStoreSessionCount(re.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],se(o),fe(a.includes(re.id)),_e(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[re.id,re.storeIcon]),(0,o.useEffect)((function(){J&&J.length>0&&(he||ye(!0))}),[J,he]),(0,o.useEffect)((function(){var e=f.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=re&&re.id,n={background:!0};t&&Ee.current&&j(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Ee.current=!1,z(),r.next=4,l.default.send("honeyTips:tips",{action:e,storeId:t},n);case 4:case"end":return r.stop()}}),r,void 0)})))()}),[re,Ee,z]);var we,Oe=(we=j(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue&&ue.isLoggedIn||h.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(n=de?"UNFOLLOW":"FOLLOW")?e((0,_.storeFollow)()):"UNFOLLOW"===n&&e((0,_.storeUnfollow)()),t.next=5,h.default.updateUserFollow(re.id,ue.id,n);case 5:r=t.sent,fe(r.includes(re.id));case 7:case"end":return t.stop()}}),t,void 0)}))),function(){return we.apply(this,arguments)});if(!G)return a.default.createElement(o.Fragment,null);var Se=H&&a.default.createElement(s.LoaderGroup,null)||null,xe=a.default.createElement(o.Fragment,null,0!==Z.length&&Z.map((function(e,t){var n=!N||t===Z.length-1,r=oe?"1px":"0px";return a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(T.default,null,a.default.createElement(A.default,{isFullyExpandedPdp:!0,tipInstanceId:e},a.default.createElement(w.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card"}))))}))),Pe=ee&&a.default.createElement("div",{style:{minHeight:u.current}},ee?a.default.createElement(w.default,{tipInstanceId:ee,templateType:"fullscreen"}):a.default.createElement(I.default,{yOffset:"45%"}))||null,Te=H?a.default.createElement(F,null):!X&&!ee&&xe||null,Ie=X&&a.default.createElement("div",{style:{minHeight:u.current}},a.default.createElement(L.default,{isLaunchpad:!ee}))||null;return 0===Z.length?a.default.createElement(o.Fragment,null):a.default.createElement(x.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(s.UniversalContainer,{open:q},a.default.createElement(s.UniversalContainerLayout,{ref:{refContent:n},header:a.default.createElement("div",null,a.default.createElement("div",{className:t.launchpadHeader},a.default.createElement(y.default,{leftContainer:a.default.createElement((function(){return X?a.default.createElement("span",{onClick:Q},a.default.createElement(m.default,null)):ee?a.default.createElement("span",{onClick:ne(!1)},a.default.createElement(m.default,null)):a.default.createElement(b.default,null)}),null),middleContainer:a.default.createElement((function(){return ee?a.default.createElement("span",{className:t.middleHeader},c.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(M.default,{onClick:function(){e((0,_.tipContainerActionsClose)())},showFeedback:function(){return K({tipInstanceId:null})}})})),!!ue&&!X&&a.default.createElement(p.StoreFollowUI,{inPopover:!1,store:re,storeFollowButton:a.default.createElement(v.default,{allowTooltip:!1,isFollowing:de,isHeaderButton:!0,store:{storeId:re.id,storeName:re.name},storeSessionCount:be,subSrc:"launchpad",updateUserFollow:Oe,user:ue})})),footer:oe&&a.default.createElement(P.default,{isContainerOpen:q})},Se,Pe,Te,Ie)))})};U.propTypes={},t.default=U},2514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useSelector)(o.selectCurrentContainerId),t=(0,r.useSelector)((0,a.selectUniversalContainerById)(e))||{},n=t.hasValidLaunchpadTips,i=void 0!==n&&n,u=t.hasValidLaunchpadBadgeTips,s=void 0!==u&&u;return{hasValidLaunchpadTips:i,hasValidLaunchpadBadgeTips:s}};var r=n(6),o=n(25),a=n(18)},2515:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),a=n(29),i=n(51),u=g(n(1182)),s=g(n(1184)),c=g(n(2516)),l=g(n(2518)),d=g(n(1240)),f=g(n(1241)),p=g(n(2523)),v=g(n(2526)),h=g(n(2527)),y=g(n(2528));function g(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e;return(0,u.default)(),(0,s.default)(),(0,y.default)(),(0,c.default)(),(0,l.default)(),(0,d.default)(),(0,f.default)(),(0,p.default)(),e=(0,o.useDispatch)(),(0,r.useEffect)((function(){e(a.storesActions.load()),e(i.userActions.load())}),[e]),(0,v.default)(),(0,h.default)(),null}},2516:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=void 0,n=void 0,r=(0,i.default)("honeyTips:initDataFetcherFactory")((function(r){t=(0,i.default)("honeyTips:createRelevanceState")((function(t){var n=r.map((function(n){var r=n.categoryId,o=(0,u.getDataFetcher)(r);return e(l(r,t,o))}));Promise.allSettled(n).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));a.default.send("honeyTips:createRelevanceRequest",t)}))})),n=(0,i.default)("honeyTips:updateVariantInRelevanceState")((function(t){var n=r.filter((function(e){return e.updateOnVariantChange})).map((function(n){var r=n.categoryId;s.default.cleanupListener(r);var o=(0,u.getDataFetcher)(r);return e(l(r,t,o))}));Promise.allSettled(n).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));a.default.send("honeyTips:createRelevanceRequest",t)}))}))}));return function(){r(),s.default.cleanupListeners(),t&&t(),n&&n()}}),[e])};var r=n(0),o=n(6),a=c(n(8)),i=c(n(64)),u=n(1239),s=c(n(2517));function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e,t,n){return function(r){return s.default.createDataFetcherPromise({categoryId:e,data:t,dataFetcher:n,dispatch:r})}}},2517:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=i(n(8)),a=i(n(9));function i(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var s,c=new Map,l=function(e){var t=e.categoryId,n=e.fetchedData,r=e.data;o.default.send("honeyTips:createRelevanceRequest",[{categoryId:t,fetchedData:n,data:r,update:!0}])},d=function(e){c.has(e)&&(c.get(e)(),c.delete(e))},f=function(e,t){"function"==typeof t&&c.set(e,t)},p=(s=u(regeneratorRuntime.mark((function e(t){var n,o,i,s,c,p,v,h,y,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,o=t.dataFetcher,i=t.categoryId,s=t.dispatch,d(i),c=void 0,p=function(e){l({categoryId:i,fetchedData:e,data:n})},v=new Promise((function(e,t){c=setTimeout((function(){a.default.debug("Tips:dataFetcher:timeout for:"+i),t()}),g)})),h=new Promise(function(){var e=u(regeneratorRuntime.mark((function e(t,r){var u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=function(e){c?(a.default.debug("Tips:dataFetcher:resolved for:"+i),t(e)):(a.default.debug("Tips:dataFetcher:resolved late, running update for:"+i),p(e))},e.next=3,s(o(n,p,{resolve:u,reject:r}));case 3:l=e.sent,f(i,l);case 5:case"end":return e.stop()}}),e,void 0)})));return function(t,n){return e.apply(this,arguments)}}()),y=void 0,e.prev=7,e.next=10,Promise.race([v,h]).then((function(e){return{fetchedData:r({},e),categoryId:i,data:n,update:!!e}}));case 10:y=e.sent;case 11:return e.prev=11,clearTimeout(c),c=void 0,e.finish(11);case 15:return e.abrupt("return",y);case 16:case"end":return e.stop()}}),e,void 0,[[7,,11,15]])}))),function(e){return s.apply(this,arguments)});t.default={createDataFetcherPromise:p,addListener:f,cleanupListener:d,cleanupListeners:function(){c.forEach((function(e){return e()}))}}},2518:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=(0,l.default)("honeyTips:createRelevanceRequest")((function(t){var n=Array.isArray(t)?t:[t],a=r(n,1)[0].data.stateId,i=(0,u.default)();n.forEach((function(t){return e((n=t,function(e){var t=n.fetchedData,r=n.categoryId,a=n.data;if(n.update){var i=a.stateId,u={id:i,data:v({},r,o({},t,{id:i+"_"+r,relevanceStateId:i,categoryId:r}))},c=(0,s.normalize)(u,f.RELEVANCE_STATE);e({type:d.UPDATE_RELEVANCE,data:c})}}));var n})),e((0,c.default)(a,i))}));return function(){t()}}),[e])};var a=n(0),i=n(6),u=p(n(180)),s=n(36),c=p(n(2519)),l=p(n(64)),d=n(474),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38));function p(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2519:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=v(n(180)),a=n(36),i=n(474),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38)),s=n(18),c=n(1237),l=n(1238),d=n(403),f=v(n(2520)),p=v(n(2521));function v(e){return e&&e.__esModule?e:{default:e}}var h=function(e,t,n){return function(r){var s=Date.now(),c=(0,o.default)(),l={id:c,result:n,relevanceRequest:t,relevanceState:{id:e,relevanceResponseId:c,result:n,updated:s},created:s},f=(0,a.normalize)(l,u.RELEVANCE_RESPONSE);r({type:i.RELEVANCE_RESPONSE,data:f}),r((0,d.setCurrentTips)(c))}},y=function(e){return t=regeneratorRuntime.mark((function t(n,o){var a,i,u,d,v,y,g,m,b,_,E;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,s.selectById)("relevanceRequests")(e)(o()),i=a.relevanceState,u=(0,s.selectAll)("categories")(o()),d=(0,s.selectAll)("tips")(o()),v=Object.keys(d),t.next=7,(0,f.default)(v);case 7:return y=t.sent,g=y.reduce((function(e,t){return r({},e,(n={},o=t,a=d[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n));var n,o,a}),{}),m=(0,s.selectRelevanceStateDataById)(i)(o()),b=o().universalContainer.currentContainerId,t.next=13,(0,p.default)({categoryData:m,getEligibilityFilter:c.getEligibilityFilter,getScoringFn:l.getScoringFn,entities:{categories:u,tips:g},containerId:b,dispatch:n});case 13:_=t.sent,E=_.hits,n(h(i,a,E));case 16:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n};t.default=function(e,t){return function(n,o){var c=(0,s.selectById)("relevanceStates")(e)(o()),l=c.data,d=Date.now(),f={id:t,relevanceState:r({},c,{updated:d,relevanceRequestId:t}),data:l,created:d},p=(0,a.normalize)(f,u.RELEVANCE_REQUEST);n({type:i.RELEVANCE_REQUEST,data:p}),n(y(t))}}},2520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1254)),o=a(n(1253));function a(e){return e&&e.__esModule?e:{default:e}}var i,u,s=function(e){return function(t){return e.indexOf(t)<0}},c=(i=regeneratorRuntime.mark((function e(t){var n,a,i,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.default)();case 2:return n=e.sent,a=n.honeyTipsConfiguration,i=a.blacklistTipIds,u=void 0===i?[]:i,c=t.filter(s(u)),e.next=8,(0,o.default)(c);case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,void 0)})),u=function(){var e=i.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return u.apply(this,arguments)});t.default=c},2521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(36),a=v(n(129)),i=v(n(13)),u=v(n(472)),s=n(220),c=v(n(96)),l=n(38),d=n(43),f=v(n(2522)),p=v(n(171));function v(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var y,g,m,b=(0,s.v4)(),_=(y=h(regeneratorRuntime.mark((function e(t,n){var o,s,c,l=t.debugEvent,d=t.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getCurrent();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return o=e.t0,e.next=8,(0,p.default)();case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:return s=e.t1,c=o.storeId,e.next=15,(0,a.default)({debugEvent:l,action:d},r({},n,{url:window.location.href}),r({store:{id:c},productId:s&&s.id},(0,u.default)()))();case 15:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return y.apply(this,arguments)}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length===t.length&&e.every((function(e,n){return e===t[n]}));n||_({debugEvent:"tips_api_mismatched_tip_ids",action:"performance_relevanceengine_gettips"},{metricId:b,apiTipIds:t,testTraditionalTipIds:e})},w=function(e){var t=e.categoryData,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["categoryData"]),o=n.Tip_id,a=r({},n,{id:o});return r({},t,{id:t.categoryId,tips:[a]})},O=function(e,t){e.forEach((function(e){var n=e.tip,r=w(n),a=(0,o.normalize)(r,l.CATEGORY);t({type:d.SET_CATEGORY,data:a})}))},S=(g=h(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.categoryData,r=t.dispatch,e.next=3,c.default.getTips(n);case 3:return o=e.sent,a=o.hits,i=void 0===a?[]:a,u=o.count,(s=void 0===u?0:u)&&O(i,r),e.abrupt("return",{hits:{hits:i,count:s}});case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return g.apply(this,arguments)}),x=(m=h(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=performance.now(),r=(0,f.default)(t),o=performance.now(),e.next=5,c.default.useAPI();case 5:if(!e.sent){e.next=18;break}return _({debugEvent:"tips_api_performance",action:"performance_relevanceengine_traditional"},{fetchDeltaMs:o-n,metricId:b}),a=performance.now(),e.next=11,S(t);case 11:return i=e.sent,u=performance.now(),_({debugEvent:"tips_api_performance",action:"performance_relevanceengine_api"},{fetchDeltaMs:u-a,metricId:b}),s=r&&r.hits&&r.hits.hits&&r.hits.hits.map((function(e){return e._id}))||[],l=i&&i.hits&&i.hits.hits&&i.hits.hits.map((function(e){return e._id}))||[],E(s,l),e.abrupt("return",i);case 18:return e.abrupt("return",(0,f.default)(t));case 19:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)});t.default=x},2522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=e.categoryData,n=void 0===t?{}:t,o=e.getEligibilityFilter,a=void 0===o?function(){}:o,s=e.getScoringFn,c=void 0===s?function(){}:s,l=e.entities,d=void 0===l?{}:l,f=e.containerId,p=e.product,v=void 0===p?{}:p,h=e.dispatch,y=void 0===h?function(){}:h,g=d.categories,m=void 0===g?{}:g,b=d.tips,_=void 0===b?{}:b,E=function(e,t,n){var r=[];for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=e[o];t[o]&&n(o)&&r.push(a)}return r}(m,n,a).map((function(e){var t=e.id,o=Object.values(_).filter((function(e){return e.categoryId===t}));if(o.length<=0)return null;var i=n[t],u=a(t)(i),s=c(t),l=o.filter((function(e){return function(e,t){var n=!0;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var o=t[r],a=e[r];o!==a&&(n=!1)}return n}(e,u)})),d=("function"==typeof s?l.map((function(e){var t=s(i,e);return r({},e,{score:t})})):l).sort((function(e,t){return e.score<t.score?1:-1}));return d.length>0?d[0]:null})).reduce((function(e,t){return t&&e.push(t),e}),[]).sort((function(e,t){return e.score<t.score?1:-1})),w=E.map((function(e){return{_id:e.id,score:e.score,_source:e}})),O=E.map((function(e){return e.id}));(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e}));if(!u&&t)return u=t,!0;if(t.length>0){var n=u.length===t.length&&u.every((function(t,n){return t===e[n]}));return u=t,!n}return!1})(O)&&y((0,i.default)({universalContainerId:f,debugEvent:"offers_miss_rate",action:"performance_relevanceengine_generated_tips"},{product:v,offer:null,canShowAutoPop:!1,tipCount:E.length,tipHits:w}));return{hits:{count:E.length,hits:w}}};var o,a=n(129),i=(o=a)&&o.__esModule?o:{default:o};var u=null},2523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,a.default)("honeyTips:updateVariant")((function(t){e((0,i.default)(t))}));return function(){t()}}),[e])};var r=n(0),o=n(6),a=u(n(64)),i=u(n(2524));function u(e){return e&&e.__esModule?e:{default:e}}},2524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(13)),o=p(n(9)),a=p(n(14)),i=p(n(219)),u=p(n(2525)),s=p(n(862)),c=p(n(279)),l=n(25),d=n(18),f=n(100);function p(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n,p){var v,h,y,g,m,b,_,E,w,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,v=p(),h=(0,l.selectCurrentContainerId)(v),y=(0,d.selectUniversalContainerById)(h)(v)||{},g=y.relevanceStateId,m=!(0,i.default)(e),t.next=8,(0,c.default)();case 8:return b=t.sent,t.next=11,(0,f.canShowAutoPop)();case 11:return _=t.sent,t.next=14,r.default.getCurrent();case 14:return E=t.sent,w=E&&E.id,t.next=18,a.default.getInfo();case 18:O=t.sent,n((0,u.default)(g,{storeId:w,merchId:m&&e.merchId,variantId:m&&e.variantId,parentId:m&&e.merchId,productId:m&&e.id,product:m&&e,isLaunchpad:b,isAutopop:_,store:E,user:O})),n((0,s.default)({product:e})),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),o.default.error(t.t0);case 26:case"end":return t.stop()}}),t,void 0,[[0,23]])})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n}},2525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(36),i=n(8),u=(r=i)&&r.__esModule?r:{default:r},s=n(474),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(38));t.default=function(e,t){return function(n){var r=o({},t,{stateId:e}),i=o({},t,{id:e}),l=(0,a.normalize)(i,c.RELEVANCE_STATE);return n({type:s.UPDATE_VARIANT_IN_RELEVANCE_STATE,data:l}),u.default.send("honeyTips:updateVariantInRelevanceState",r),e}}},2526:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(51),o=n(29),a=n(0),i=n(6);t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(r.userSelectors.selectUser()),n=t&&t.id,u=t&&t.isLoggedIn,s=(0,i.useSelector)(o.storesSelectors.selectCurrentStore()),c=s&&s.id,l=s&&s.isDoubleGold;(0,a.useEffect)((function(){n&&c&&u&&l&&e(r.userActions.getDoubleGoldActivationsByUserId(n))}),[e,n,c,u,l])}},2527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.useDispatch)();(0,o.useEffect)((function(){var t=function(t,n){"pre-open"===n.action&&e((0,s.handleUIAction)())};return u.default.addListener("ui:action",t),function(){u.default.removeListener("ui:action",t)}}),[e])};var r,o=n(0),a=n(6),i=n(8),u=(r=i)&&r.__esModule?r:{default:r},s=n(26)},2528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),a=u(n(2529)),i=u(n(64));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,i.default)("offers:action")((function(t){var n=t.success.store,r=t.action;"offerActivated"===(void 0===r?"":r)&&e((0,a.default)(n))}));return function(){t()}}),[])}},2529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(13)),o=i(n(8)),a=n(29);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,r.default.getCurrent();case 4:t.t0=t.sent;case 5:return i=t.t0,n((0,a.update)(i)),t.next=9,o.default.send("honeyTips:updateStore",i);case 9:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return n.apply(this,arguments)};var t,n}},2530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),u=n(6),s=l(n(9)),c=n(26);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,s.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);d.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},d.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipBadgeInjectionError)(t))}}}))(d)},2531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),o=u(n(1)),a=n(2),i=n(3);function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,a.createUseStyles)({resetCss:{textTransform:"none",lineHeight:"normal",fontWeight:"normal",color:i.Colors.grey900}}),c=function(e){var t=e.children,n=s();return r.default.createElement("div",{className:n.resetCss},t)};c.propTypes={children:o.default.node},c.defaultProps={children:void 0},t.default=c},2532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(37)),o=s(n(89)),a=s(n(1313)),i=s(n(206)),u=s(n(860));function s(e){return e&&e.__esModule?e:{default:e}}var c,l,d=(c=regeneratorRuntime.mark((function e(){var t,n,s,c,l,d,f,p,v,h,y,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.default)();case 2:return t=e.sent,n=t&&t.id,e.next=6,r.default.getSetting("hideTeaserOnTheseStores");case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0="";case 9:return s=e.t0,e.next=12,o.default.local.get(u.default.SNOOZE_ONE_DAY_EVENT).catch(NotFoundError,(function(){return!1}));case 12:return c=e.sent,l=s.split(","),d=c&&Date.now()<parseInt(c,10),f=l.includes(n),e.next=18,(0,a.default)();case 18:return p=e.sent,v=p.tipsEnabledByUser,h=!v,y=d||f||h,g=void 0,d?g="snoozed_for_day":f?g="snoozed_for_store":h&&(g="snoozed_for_all"),e.abrupt("return",{isSuppressed:y,reason:g});case 25:case"end":return e.stop()}}),e,void 0)})),l=function(){var e=c.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return l.apply(this,arguments)});t.default=d},2533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(9)),o=s(n(1151)),a=s(n(279)),i=n(100),u=n(312);function s(e){return e&&e.__esModule?e:{default:e}}var c,l="honeyTips:getIsValidLaunchpadPage:";t.default=(c=regeneratorRuntime.mark((function e(){var t,n,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.canRunTips)({ignorePageTypeCheck:!0});case 2:if(e.sent){e.next=6;break}return r.default.debug(l+" Can't run tips"),e.abrupt("return",!1);case 6:if(t=(0,u.getIsLaunchpadPage)(),r.default.debug(l+" isLaunchpadPage: "+t),t){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,(0,o.default)();case 12:if(n=e.sent,r.default.debug(l+" canShowLaunchpad: "+n),n){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,a.default)();case 18:if(s=e.sent,r.default.debug(l+" canShowLaunchpadWithBlacklist: "+s),s){e.next=22;break}return e.abrupt("return",!1);case 22:return r.default.debug(l+" returning true"),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this)})),function(){var e=c.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))})},2534:function(e,t,n){"use strict";var r=d(n(9)),o=d(n(8)),a=n(33),i=d(n(64)),u=d(n(1308)),s=n(1242),c=n(171),l=d(n(206));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var p,v,h={urlToPageTypeMap:{},parentId:void 0,variantId:void 0},y=function(e){var t=e.parentId,n=e.variantId;h.parentId?h.parentId&&t&&h.parentId===t?h.variantId&&n&&h.variantId!==n?(h.variantId=n,(0,c.setProduct)(e),o.default.send("honeyTips:updateVariant",e)):r.default.debug("honeyTips:pageController:same product, dont update"):(h.parentId=t,h.variantId=n,(0,c.setProduct)(e),o.default.send("honeyTips:updateProduct",e)):(h.parentId=t,h.variantId=n,r.default.debug("honeyTips:pageController:setting initial product"),(0,c.setProduct)(e))};(0,a.productFetcherListener)((p=f(regeneratorRuntime.mark((function e(t){var n,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("honeyTips:pageController:product v4"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),e.next=4,(0,l.default)();case 4:n=e.sent,a=n&&n.id,i=(0,s.formatInitialProduct)(t,a),y(i);case 8:case"end":return e.stop()}}),e,void 0)}))),function(e){return p.apply(this,arguments)})),(0,i.default)("current:product")((v=f(regeneratorRuntime.mark((function e(t){var n,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.default.debug("honeyTips:pageController:product v5"),o.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),n=(t||{}).data,e.next=5,(0,l.default)();case 5:a=e.sent,i=a&&a.id,u=(0,s.formatInitialProductV5)(n,i),y(u);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return v.apply(this,arguments)})),(0,i.default)("honeyTips:updateProduct")((function(){r.default.debug("honeyTips:pageController:updateProduct")})),(0,i.default)("honeyTips:updateVariant")((function(){r.default.debug("honeyTips:pageController:updateVariant")})),(0,i.default)("honeyTips:updateLaunchpad")((function(){r.default.debug("honeyTips:pageController:newLaunchpad")})),(0,i.default)("honeyTips:newPage")((function(){r.default.debug("honeyTips:pageController:newPage")})),(0,i.default)("honeyTips:turnOff")((function(){r.default.debug("honeyTips:pageController:turnOff")})),a.PAGE_TYPES.map((function(e){return(0,i.default)("pageDetected:"+e)((function(){!function(e){var t=e.currPageType,n=u.default.getInitialized(),r=u.default.getInitalizing(),i=new URL(document.URL);h.urlToPageTypeMap[i]||(h.urlToPageTypeMap[i]={}),h.urlToPageTypeMap[i][t]=!0;var s=Object.keys(h.urlToPageTypeMap[i]),c=s.some(a.isProductPage),d=s.some(a.isLaunchpadPage);n||r||(o.default.send("honeyTips:newPage",null),(0,l.default)()),c||d||!n||r||(o.default.send("honeyTips:turnOff",null),h.parentId=null,h.variantId=null,h.isLaunchPad=null),d&&!h.isLaunchPad&&(h.parentId=null,h.variantId=null,h.isLaunchPad=!0,o.default.send("honeyTips:updateLaunchpad",null)),c&&o.default.send("pdp:debug",{eventName:"tips waiting for hpid"},{background:!0,ignoreResponse:!0})}({currPageType:e})}))}))},2535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=(r=S(regeneratorRuntime.mark((function e(t){var n,r,o,i,u,c,h,g,m,_,O,S,A,N,j,D,F,U;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([f.default.getCurrent(),v.default.getInfo(),v.default.getSetting("tipsEnabled"),(v.default.getUserABGroup("realTimeDroplistTip")||{}).allowNonRegisteredUsers]);case 2:if(n=e.sent,r=a(n,4),o=r[0],i=void 0===o?{}:o,u=r[1],c=void 0===u?{}:u,h=r[2],g=r[3],m=void 0===g||g,_=null,1===h&&i.metadata&&i.metadata.honeyTipsAutopopOn&&!k){e.next=15;break}return e.abrupt("return");case 15:l.default.send("pdp:debug",{eventName:"tips autopop started",storeId:i.id},{ignoreResponse:!0,background:!0}),k=!0,e.t0=i.standDown,e.next="base"===e.t0?20:"nopopup"===e.t0?21:"suspend"===e.t0?21:24;break;case 20:return e.abrupt("break",24);case 21:return l.default.send("pdp:debug",{eventName:"tips stood down",storeId:i.id},{background:!0,ignoreResponse:!0}),L=!0,e.abrupt("return");case 24:if(t!==I.BILLING){e.next=27;break}if(c.isLoggedIn){e.next=27;break}return e.abrupt("return");case 27:if(t!==I.PRODUCT){e.next=44;break}return e.next=30,(0,b.canShowAutoPop)();case 30:if(e.sent){e.next=33;break}return e.abrupt("return");case 33:return e.next=35,(0,E.default)();case 35:if(!e.sent.merchId){e.next=40;break}return e.next=39,(0,w.default)();case 39:_=e.sent;case 40:if((!0===i.metadata.droplist_universal_active||!0===i.metadata.droplist_universal_active_2||_)&&(m||c.isLoggedIn)){e.next=43;break}return l.default.send("pdp:debug",{eventName:"tips cannot autopop",isLoggedIn:c.isLoggedIn},{background:!0}),e.abrupt("return");case 43:l.default.send("pdp:debug",{eventName:"tips autopop got offer"},{background:!0});case 44:return M={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:c.isLoggedIn?"registered":"non_registered"},e.next=47,v.default.getUserABGroup("activeHoneyTips");case 47:if(e.t2=e.sent,e.t2){e.next=50;break}e.t2={};case 50:if(e.t1=e.t2.tips,e.t1){e.next=53;break}e.t1={};case 53:if(O=e.t1,0!==Object.keys(O).length){e.next=56;break}return e.abrupt("return");case 56:e.t3=t,e.next=e.t3===I.BILLING?59:e.t3===I.PRODUCT?61:63;break;case 59:return R=O.billFixers&&O.billFixers[i.id]?T.BILL_FIXERS:null,e.abrupt("break",64);case 61:return R=O.realTimeDroplist&&O.realTimeDroplist[i.id]?T.REAL_TIME_DROPLIST:null,e.abrupt("break",64);case 63:R=null;case 64:return e.next=66,d.default.getSetting("autopop:suppression");case 66:if(e.t4=e.sent,e.t4){e.next=69;break}e.t4={};case 69:if(S=e.t4,M.autoPopSetting=S,R!==T.REAL_TIME_DROPLIST){e.next=73;break}return e.abrupt("return");case 73:if(A=(0,s.default)().unix(),"nextTimeToShowTip"in S&&!(A>S.nextTimeToShowTip)){e.next=92;break}if(R!==T.BILL_FIXERS){e.next=90;break}return e.next=78,v.default.getUserABGroup("billFixersAB");case 78:if(e.t5=e.sent,e.t5){e.next=81;break}e.t5={};case 81:return N=e.t5,j=N&&N.group,e.next=85,y.default.checkForCreditCardOffers(i,P.AUTO_POP,!0);case 85:if(0!==(D=e.sent).length){e.next=88;break}return e.abrupt("return");case 88:F=D.filter((function(e){var t=S[e.creditCardOfferId];return!t||t>0&&A>t})),"on"===j?F.length>0&&(U=Object.assign(S,{nextTimeToShowTip:A+x}),d.default.updateSetting("autopop:suppression",U),p.default.open({pathname:"/honey-tips",query:{},state:{creditCardOffers:F,lastFetchedTime:A,tipType:R,storeId:i.id,autoPopSetting:U},force:!1,feature:"honey-tips",surface:"badge"})):C(D,i.id,"control_group");case 90:e.next=100;break;case 92:if(R!==T.BILL_FIXERS){e.next=99;break}return e.next=95,y.default.checkForCreditCardOffers(i,P.AUTO_POP,!0);case 95:C(e.sent,i.id,"suppression"),e.next=100;break;case 99:l.default.send("pdp:debug",{eventName:"tips suppressed",storeId:i.id},{background:!0,ignoreResponse:!0});case 100:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),u=(o=S(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,v,y,m,b,E,w,O,S,x,P,I,C,k,A,N,j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.default)();case 2:if(n=e.sent,r=j.type,o=j.product,a=(o=void 0===o?{}:o).imprint,i=o.variant_id,u=o.parent_id,v=o.dealScore,y=o.imageUrl,m=o.lastPrice,b=o.canonicalUrl,E=o.storeId,w=o.title,"productFetcher"!==r||!a||!i){e.next=19;break}return e.next=9,f.default.getCurrent();case 9:return O=e.sent,S=(0,c.default)(i),M.productId=u?O.id+"_"+(0,c.default)(u)+"_"+S:O.id+"_"+S+"_"+S,x={productId:M.productId,storeId:O.id},e.next=15,l.default.send("honey-tip:smart-droplist",{action:"incrementNumTimesSeenForProduct",data:x},{background:!0});case 15:P=e.sent,M.productViewCount=P,e.next=30;break;case 19:if("catalogue"!==r){e.next=30;break}if(R===T.REAL_TIME_DROPLIST&&"number"==typeof v){e.next=22;break}return e.abrupt("return");case 22:return I=(0,s.default)().unix(),C={productId:M.productId,imageUrl:y,currentPrice:m,shopUrl:b,title:w,dealScore:v},(k=(M.autoPopSetting||{}).realTimeDroplist)||(k={product:{}},M.autoPopSetting.realTimeDroplist=k),e.next=28,g.default.getRealTimeDroplistHideReason(v,M,I,L,n);case 28:(A=e.sent)?h.default.sendEvent("droplist713",{dropListProduct:C,userType:M.userType,hideReason:A}):(N=k.count+1,k.count=N,k.product[M.productId]={timeLastSeen:I,dealScore:v},p.default.open({pathname:"/honey-tips",query:{},state:{lastFetchedTime:I,autoPopSetting:M.autoPopSetting,droplistProduct:C,storeId:E,tipType:T.REAL_TIME_DROPLIST,userType:M.userType},force:!1,feature:"honey-tips",surface:"badge"}),d.default.updateSetting("autopop:suppression",M.autoPopSetting));case 30:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),s=O(n(32)),c=O(n(418)),l=O(n(8)),d=O(n(37)),f=O(n(13)),p=O(n(21)),v=O(n(14)),h=O(n(11)),y=O(n(289)),g=O(n(2536)),m=O(n(496)),b=n(100),_=O(b),E=O(n(171)),w=O(n(401));function O(e){return e&&e.__esModule?e:{default:e}}function S(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))}}var x=m.default.ONE_DAY_IN_SECONDS,P=m.default.SOURCES,T=m.default.TIP_TYPE,I=m.default.PAGE_TYPE;function C(e,t,n){h.default.sendEvent("tip003024",{card_offer_ids:e.map((function(e){return e.creditCardOfferId})),store:{id:t},reason_not_shown:n})}var R=void 0,k=!1,L=!1,M={creditCardOffers:void 0,lastFetchedTime:void 0,autoPopSetting:{},productId:void 0,productViewCount:void 0,userType:void 0};l.default.addListener("stores:session:started",S(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getCurrent();case 2:return t=e.sent,e.abrupt("return",y.default.checkForCreditCardOffers(t));case 4:case"end":return e.stop()}}),e,void 0)})))),l.default.addListener("pageDetected:BILLING",(function(){return i(I.BILLING)})),l.default.addListener("pageDetected:PRODUCT",(function(){return i(I.PRODUCT)})),l.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){return i(I.PRODUCT)})),l.default.addListener("droplist:update",u),t.default={creditCardOffers:y.default}},2536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=regeneratorRuntime.mark((function e(t,n,r,o,a){var u,l,d,f,p,v,h,y,g,m,b,_,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=n.autoPopSetting.realTimeDroplist,l=n.productId,d=n.productViewCount,f=u.product[l]||{},e.next=4,i.default.getUserABGroup("realTimeDroplistTip");case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(p=e.t0,v=p.dailyMax,h=void 0===v?5:v,y=p.minDealScoreWithViews,g=void 0===y?5:y,m=p.minDealScoreWithoutViews,b=void 0===m?20:m,_=p.minViews,E=void 0===_?3:_,!a){e.next=11;break}return e.abrupt("return","universal_container_displayed");case 11:if(!o){e.next=13;break}return e.abrupt("return","stand_down");case 13:if(-1!==u.timeToShowNext){e.next=15;break}return e.abrupt("return","opt_out");case 15:if(!(u.timeToShowNext>r)){e.next=17;break}return e.abrupt("return","suppressed");case 17:if(u.count&&!(u.timeCountReset+s<r)){e.next=30;break}if(Object.assign(u,{count:0,timeCountReset:r}),!(f.timeLastSeen+30*s>r)){e.next=24;break}if(!(t<f.dealScore+5)){e.next=22;break}return e.abrupt("return","deal_score");case 22:e.next=28;break;case 24:if((t>=b||t>=g&&d>=E)&&t<=c){e.next=28;break}if(!(d<E&&t>=g)){e.next=27;break}return e.abrupt("return","view_count");case 27:return e.abrupt("return","deal_score");case 28:e.next=39;break;case 30:if(!(u.count>=h)){e.next=32;break}return e.abrupt("return","daily_max");case 32:if(!(f.timeLastSeen+30*s>r)){e.next=37;break}if(!(t<f.dealScore+5)){e.next=35;break}return e.abrupt("return","deal_score");case 35:e.next=39;break;case 37:if(!(t<=b||t>c)){e.next=39;break}return e.abrupt("return","deal_score");case 39:return e.abrupt("return","");case 40:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e,t,n,r,a){return o.apply(this,arguments)}),i=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}var s=u(n(496)).default.ONE_DAY_IN_SECONDS,c=75;t.default={getRealTimeDroplistHideReason:a}},2537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);function o(){this.installed=!1,this.onUnloadFired=!1}o.prototype.install=function(){var e=this,t=function(t){e.onUnloadFired||(e.onUnloadFired=!0,(0,r.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:"performance_user_unload"},t)())},n=Symbol("OffersPerformance");Object.defineProperty(t,"fnId",{get:function(){return n},configurable:!0}),"function"==typeof window.onunload&&window.onunload.fnId&&window.onunload.fnId===n||(window.onunload=t),"function"==typeof window.onbeforeunload&&window.onbeforeunload.fnId&&window.onbeforeunload.fnId===n||(window.onbeforeunload=t)},o.prototype.uninstall=function(){window.onunload=null,window.onbeforeunload=null};var a=new o;t.default=a},2538:function(e,t,n){"use strict";var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=regeneratorRuntime.mark((function e(){var t,n,r,o,u,s,p,v,g,m,b,_,E,w,O,S,x,P,T,I,C,R,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([l.default.getCurrent(),c.default.getUserABGroup("pdpPopupEngine")]);case 2:return t=e.sent,n=i(t,2),r=n[0],o=void 0===r?{}:r,u=n[1],p=(s=void 0===u?{}:u).group,v=s.targetPlatform,g=s.targetMinVersion,m=s.targetMaxVersion,e.next=11,l.default.getPdpRegex(o.id);case 11:return b=e.sent,_="control"===p,E="ch"===v,w=y("13.7.0",g,m),O=0,e.next=18,f.default.local.get("HoneyPdpPopup:hide:"+o.id).then((function(e){e&&Date.now()-e.time<e.days?O=1:f.default.local.del("HoneyPdpPopup:hide:"+o.id)})).catch(NotFoundError,(function(){}));case 18:if(S=window.location.href,x=!1,!(b&&Array.isArray(b)&&b.length)){e.next=50;break}P=!0,T=!1,I=void 0,e.prev=24,C=b[Symbol.iterator]();case 26:if(P=(R=C.next()).done){e.next=34;break}if(k=R.value,!(x=h(k,S))){e.next=31;break}return e.abrupt("break",34);case 31:P=!0,e.next=26;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(24),T=!0,I=e.t0;case 40:e.prev=40,e.prev=41,!P&&C.return&&C.return();case 43:if(e.prev=43,!T){e.next=46;break}throw I;case 46:return e.finish(43);case 47:return e.finish(40);case 48:e.next=55;break;case 50:if("string"!=typeof b||!b.trim().length){e.next=54;break}x=h(b,S),e.next=55;break;case 54:return e.abrupt("return");case 55:!_&&x&&!O&&E&&w&&d.default.open({pathname:"/honey-pdp-popup",query:{},state:a({},s,{storeId:o.id}),force:!1,feature:"honey-pdp-popup",surface:"popup"});case 56:case"end":return e.stop()}}),e,this,[[24,36,40,48],[41,,43,47]])})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(){return o.apply(this,arguments)}),s=v(n(8)),c=v(n(14)),l=v(n(13)),d=v(n(21)),f=v(n(89)),p=v(n(2539));function v(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return"All PDP"===e||!!t.match(e)}function y(e,t,n){if(n&&t&&e){var r=t+" - "+n;return p.default.satisfies(e,r)}return!1}s.default.addListener("pageDetected:PRODUCT",(function(){u()})),s.default.addListener("pageDetected:SHOPIFY_PRODUCT_PAGE",(function(){u()}))},2539:function(e,t,n){const r=n(321);e.exports={re:r.re,src:r.src,tokens:r.t,SEMVER_SPEC_VERSION:n(507).SEMVER_SPEC_VERSION,SemVer:n(125),compareIdentifiers:n(922).compareIdentifiers,rcompareIdentifiers:n(922).rcompareIdentifiers,parse:n(322),valid:n(2540),clean:n(2541),inc:n(2542),diff:n(2543),major:n(2544),minor:n(2545),patch:n(2546),prerelease:n(2547),compare:n(211),rcompare:n(2548),compareLoose:n(2549),compareBuild:n(924),sort:n(2550),rsort:n(2551),gt:n(509),lt:n(925),eq:n(923),neq:n(1314),gte:n(926),lte:n(927),cmp:n(1315),coerce:n(2552),Comparator:n(928),Range:n(182),satisfies:n(1316),toComparators:n(2553),maxSatisfying:n(2554),minSatisfying:n(2555),minVersion:n(2556),validRange:n(2557),outside:n(929),gtr:n(2558),ltr:n(2559),intersects:n(2560)}},2540:function(e,t,n){const r=n(322);e.exports=(e,t)=>{const n=r(e,t);return n?n.version:null}},2541:function(e,t,n){const r=n(322);e.exports=(e,t)=>{const n=r(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null}},2542:function(e,t,n){const r=n(125);e.exports=(e,t,n,o)=>{"string"==typeof n&&(o=n,n=void 0);try{return new r(e,n).inc(t,o).version}catch(e){return null}}},2543:function(e,t,n){const r=n(322),o=n(923);e.exports=(e,t)=>{if(o(e,t))return null;{const n=r(e),o=r(t),a=n.prerelease.length||o.prerelease.length,i=a?"pre":"",u=a?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==o[e])return i+e;return u}}},2544:function(e,t,n){const r=n(125);e.exports=(e,t)=>new r(e,t).major},2545:function(e,t,n){const r=n(125);e.exports=(e,t)=>new r(e,t).minor},2546:function(e,t,n){const r=n(125);e.exports=(e,t)=>new r(e,t).patch},2547:function(e,t,n){const r=n(322);e.exports=(e,t)=>{const n=r(e,t);return n&&n.prerelease.length?n.prerelease:null}},2548:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>r(t,e,n)},2549:function(e,t,n){const r=n(211);e.exports=(e,t)=>r(e,t,!0)},2550:function(e,t,n){const r=n(924);e.exports=(e,t)=>e.sort((e,n)=>r(e,n,t))},2551:function(e,t,n){const r=n(924);e.exports=(e,t)=>e.sort((e,n)=>r(n,e,t))},2552:function(e,t,n){const r=n(125),o=n(322),{re:a,t:i}=n(321);e.exports=(e,t)=>{if(e instanceof r)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=a[i.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),a[i.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;a[i.COERCERTL].lastIndex=-1}else n=e.match(a[i.COERCE]);return null===n?null:o(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)}},2553:function(e,t,n){const r=n(182);e.exports=(e,t)=>new r(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))},2554:function(e,t,n){const r=n(125),o=n(182);e.exports=(e,t,n)=>{let a=null,i=null,u=null;try{u=new o(t,n)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&-1!==i.compare(e)||(a=e,i=new r(a,n)))}),a}},2555:function(e,t,n){const r=n(125),o=n(182);e.exports=(e,t,n)=>{let a=null,i=null,u=null;try{u=new o(t,n)}catch(e){return null}return e.forEach(e=>{u.test(e)&&(a&&1!==i.compare(e)||(a=e,i=new r(a,n)))}),a}},2556:function(e,t,n){const r=n(125),o=n(182),a=n(509);e.exports=(e,t)=>{e=new o(e,t);let n=new r("0.0.0");if(e.test(n))return n;if(n=new r("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){e.set[t].forEach(e=>{const t=new r(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":n&&!a(n,t)||(n=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})}return n&&e.test(n)?n:null}},2557:function(e,t,n){const r=n(182);e.exports=(e,t)=>{try{return new r(e,t).range||"*"}catch(e){return null}}},2558:function(e,t,n){const r=n(929);e.exports=(e,t,n)=>r(e,t,">",n)},2559:function(e,t,n){const r=n(929);e.exports=(e,t,n)=>r(e,t,"<",n)},2560:function(e,t,n){const r=n(182);e.exports=(e,t,n)=>(e=new r(e,n),t=new r(t,n),e.intersects(t))},320:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2468),t)},321:function(e,t,n){const{MAX_SAFE_COMPONENT_LENGTH:r}=n(507),o=n(508),a=(t=e.exports={}).re=[],i=t.src=[],u=t.t={};let s=0;const c=(e,t,n)=>{const r=s++;o(r,t),u[e]=r,i[r]=t,a[r]=new RegExp(t,n?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})\\.`+`(${i[u.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})\\.`+`(${i[u.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${i[u.NUMERICIDENTIFIER]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${i[u.NUMERICIDENTIFIERLOOSE]}|${i[u.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${i[u.PRERELEASEIDENTIFIER]}(?:\\.${i[u.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${i[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${i[u.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${i[u.BUILDIDENTIFIER]}(?:\\.${i[u.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${i[u.MAINVERSION]}${i[u.PRERELEASE]}?${i[u.BUILD]}?`),c("FULL",`^${i[u.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${i[u.MAINVERSIONLOOSE]}${i[u.PRERELEASELOOSE]}?${i[u.BUILD]}?`),c("LOOSE",`^${i[u.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${i[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${i[u.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:\\.(${i[u.XRANGEIDENTIFIER]})`+`(?:${i[u.PRERELEASE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGEPLAINLOOSE",`[v=\\s]*(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${i[u.XRANGEIDENTIFIERLOOSE]})`+`(?:${i[u.PRERELEASELOOSE]})?${i[u.BUILD]}?`+")?)?"),c("XRANGE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${i[u.GTLT]}\\s*${i[u.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})`+`(?:\\.(\\d{1,${r}}))?`+`(?:\\.(\\d{1,${r}}))?`+"(?:$|[^\\d])"),c("COERCERTL",i[u.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${i[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${i[u.LONETILDE]}${i[u.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${i[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${i[u.LONECARET]}${i[u.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${i[u.LONECARET]}${i[u.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${i[u.GTLT]}\\s*(${i[u.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${i[u.GTLT]}\\s*(${i[u.LOOSEPLAIN]}|${i[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${i[u.XRANGEPLAIN]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAIN]})`+"\\s*$"),c("HYPHENRANGELOOSE",`^\\s*(${i[u.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${i[u.XRANGEPLAINLOOSE]})`+"\\s*$"),c("STAR","(<|>)?=?\\s*\\*")},322:function(e,t,n){const{MAX_LENGTH:r}=n(507),{re:o,t:a}=n(321),i=n(125);e.exports=(e,t)=>{if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof i)return e;if("string"!=typeof e)return null;if(e.length>r)return null;if(!(t.loose?o[a.LOOSE]:o[a.FULL]).test(e))return null;try{return new i(e,t)}catch(e){return null}}},426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger={info:function(e,t){}}},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAME_TRANPORT_IDS=t.FRAME_TRANSPORT_ACTIONS=t.MESSAGE_ACTIONS=t.SCRIPT_IDS=void 0;var r="CHECKOUT_EXTENSION_OBSEVATION",o={PAGE_TO_CONTENT_TRANSPORT:r+"_PAGE_TO_CONTENT_TRANSPORT"};t.FRAME_TRANPORT_IDS=o;var a={PAGE_TO_CONTENT_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.FRAME_TRANSPORT_ACTIONS=a;var i={COLLECT_DATA:r+"_COLLECT_DATA",ENABLE_BG_SERVER:r+"_ENABLE_BG_SERVER",CONTENT_TO_BG_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.MESSAGE_ACTIONS=i;t.SCRIPT_IDS={HONEY_ANALYTICS_CONFIG:"928a0802-4adc-4e55-9c29-45515240b713"}},504:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerBase=t.ManagerBase=void 0;var o=n(2436);Object.defineProperty(t,"ManagerBase",{enumerable:!0,get:function(){return r(o).default}});var a=n(2437);Object.defineProperty(t,"ServerBase",{enumerable:!0,get:function(){return r(a).default}})},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Observable=void 0;var r=n(2463),o=function(){function e(e){var t=void 0===e?{}:e,n=t.value,o=t.replay;this.storage={},this.lastValue=n,this.replay=o||!1,this.uniqid=r.uniqid()}return e.prototype.next=function(e){var t=this.storage;Object.keys(t).forEach((function(n){return t[n](e)})),this.lastValue=e},e.prototype.subscribe=function(e){var t=this,n=this.uniqid();return this.storage[n]=e,this.replay&&setTimeout((function(){t.storage[n]&&t.storage[n](t.lastValue)}),0),{dispose:function(){delete t.storage[n]}}},e}();t.Observable=o},506:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=l(a),u=l(n(1)),s=n(1236),c=n(480);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.tipInstanceId,n=e.templateType,u=e.isSecondary,l=void 0!==u&&u,d=e.hideCaret,f=void 0!==d&&d,p=e.isTeaser,v=void 0!==p&&p,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["tipInstanceId","templateType","isSecondary","hideCaret","isTeaser"]),y=(0,c.useTip)(t),g=o(y,1)[0].template;if(!g)return i.default.createElement(a.Fragment,null);var m=(0,s.getTemplate)(g);if(!m)return i.default.createElement(a.Fragment,null);var b=m[n];if(!b)return i.default.createElement(a.Fragment,null);var _=r({tipInstanceId:t,isSecondary:l,hideCaret:f,isTeaser:v,templateType:n},h);return"card"===n?i.default.createElement("div",null,i.default.createElement(b,_)):i.default.createElement(b,_)};d.propTypes={tipInstanceId:u.default.string.isRequired,templateType:u.default.string.isRequired},t.default=d},507:function(e,t){const n=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:n,MAX_SAFE_COMPONENT_LENGTH:16}},508:function(e,t,n){(function(t){const n="object"==typeof t&&t.env&&t.env.NODE_DEBUG&&/\bsemver\b/i.test(t.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=n}).call(this,n(138))},509:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>r(e,t,n)>0},914:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2425),t)},915:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2433),t),o(n(2434),t),o(n(2435),t)},916:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2462),a=(r=o)&&r.__esModule?r:{default:r};t.default={events:a.default.events,start:function(){a.default.initialize()}}},917:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.container;return o.default.createElement(r.Fragment,null,o.default.createElement("div",{style:{position:"fixed",top:16,zIndex:"2147483647",right:16,display:"flex"}},t))};t.default=u,u.propTypes={container:a.default.node},u.defaultProps={container:void 0}},918:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),u=n(6),s=l(n(9)),c=n(26);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,s.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(u)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);d.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},d.defaultProps={children:void 0};t.default=(0,u.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipCardErrorEvent)(t))}}}))(d)},919:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=y(n(0)),a=y(n(1)),i=n(3),u=y(n(2)),s=y(n(4)),c=n(411),l=y(n(410)),d=y(n(208)),f=y(n(483)),p=y(n(41)),v=y(n(1250)),h=y(n(871));function y(e){return e&&e.__esModule?e:{default:e}}var g=v.default.BUTTON_STATUS,m=v.default.BUTTON_COPY_STATUS,b=v.default.getButtonChoices,_={classes:a.default.object.isRequired,isLaunchpad:a.default.bool},E=function(e){var t=e.classes,n=e.isLaunchpad,a=(0,h.default)(),u=a.thoughts,v=a.status,y=a.comments,_=a.validationValue,E=a.handleSetComments,w=a.handleSetThoughts,O=a.send,S=m[v]||s.default.getMessage("Send"),x=g[v]||"",P=(0,l.default)(),T=r(P,1)[0]===c.TIPS_EXP_ENUM.thumbs_feedback,I=b(n,T).map((function(e){var t=e.value,n=e.copy;return o.default.createElement(i.RadioButton,{key:"".concat("radio-",t),value:t,copy:n})})),C="failed"===v,R={marginBottom:C?"8px":"16px",textAlign:"center"};return o.default.createElement(f.default,null,o.default.createElement("div",{className:t.main},o.default.createElement(d.default,{component:"div",variant:"title1",style:R},!n&&T?s.default.getMessage("We_want_to_hear_from_you_Whats_up_Q"):s.default.getMessage("What_are_your_thoughts_Q")),C&&o.default.createElement(d.default,{component:"div",variant:"body2",style:{color:i.Colors.red600,marginBottom:"8px"}},_),o.default.createElement(i.RadioGroup,{onChange:w,group:"paymentAmount",selectedValue:u},I),o.default.createElement(i.FormInput,{size:88,id:"forminput",label:s.default.getMessage("Comments_or_suggestions"),value:y,onChange:E}),!n&&T&&o.default.createElement(d.default,{component:"div",variant:"body2",style:{color:i.Colors.grey600,marginBottom:"18px"}},s.default.getMessageAndReplace("To_see_Tips_less_often_go_to_your_settings_GEARICON",{GEARICON:o.default.createElement(p.default,{icon:"setting-stroke-16",color:i.Colors.grey600,style:{display:"inline-flex",verticalAlign:"bottom"}})})),o.default.createElement(i.Button,{id:"SaveFeedback",size:40,buttonType:"primary",copy:S,isFlexible:!0,status:x,onClick:function(){return O(n,T)}})))};E.propTypes=_,E.defaultProps={isLaunchpad:!1},t.default=(0,u.default)({main:{padding:"24px"}})(E)},920:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=g(o),i=g(n(1)),u=n(6),s=g(n(482)),c=g(n(1198)),l=g(n(877)),d=g(n(4)),f=g(n(14)),p=g(n(96)),v=n(399),h=n(861),y=n(1161);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.onClick,n=e.showFeedback,i=e.onSettingsClick,g=(0,u.useDispatch)(),m=(0,o.useState)(!1),b=r(m,2),_=b[0],E=b[1],w=(0,o.useState)(!1),O=r(w,2),S=O[0],x=O[1],P=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),T=r(P,2),I=T[0],C=T[1],R=(0,o.useState)(!1),k=r(R,2),L=k[0],M=k[1];(0,o.useEffect)((function(){var e,t;(e=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,f.default.getInfo();case 9:i=e.sent,u=i.isLoggedIn,s=void 0!==u&&u,r&&E(!0),x(s),C(a.featureSettings||I);case 15:case"end":return e.stop()}}),e,this)})),t=function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),u=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(u).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(u)}("next")}))},function(){return t.apply(this,arguments)})()}),[I]);var A=[{copy:d.default.getMessage("Hide_on_this_page"),key:"snooze_page",onClick:function(){g((0,v.setBadgeSnooze)()),M(!1)}},{copy:d.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){g((0,y.setTeaserSnoozeOneDay)()),M(!1)}}],N=S?{copy:d.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){g((0,h.setBadgeSnoozeAllLoggedIn)()),M(!1),window.open(I)}}:{copy:d.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){g((0,y.setTeaserSnoozeAll)()),M(!1)}};if(_&&A.push({copy:d.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){g((0,y.setTeaserSnoozeOneStore)()),M(!1)}},N),n&&"function"==typeof n){A.push({copy:d.default.getMessage("Leave_feedback_LOWER"),key:"leave_feedback",onClick:function(){n(),M(!1)}})}return a.default.createElement(o.Fragment,null,L&&a.default.createElement(l.default,{classes:{main:{alignSelf:"end",whiteSpace:"nowrap",marginTop:"40px",right:"47px",width:"unset",position:"absolute"}},options:A}),a.default.createElement("span",{onClick:function(){"function"==typeof i&&i(),M(!L),g((0,v.setBadgeClickSettings)())}},a.default.createElement(c.default,null)),a.default.createElement("span",{onClick:t},a.default.createElement(s.default,null)))};m.propTypes={onClick:i.default.func,showFeedback:i.default.func,onSettingsClick:i.default.func},m.defaultProps={onClick:null,showFeedback:null,onSettingsClick:function(){}},t.default=m},921:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=f(o),i=f(n(1)),u=f(n(885)),s=n(6),c=n(33),l=n(403),d=n(205);function f(e){return e&&e.__esModule?e:{default:e}}var p={tipInstanceId:i.default.string.isRequired,isFullyExpandedPdp:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node])},v={isFullyExpandedPdp:!1,children:a.default.createElement(o.Fragment,null)},h=function(e){var t=e.tipInstanceId,n=e.children,i=e.isFullyExpandedPdp,f=(0,s.useDispatch)(),p=(0,o.useCallback)(f,[]),v=(0,d.useContainerOpen)(),h=r(v,1)[0],y=(0,c.useTipInstanceExpanded)(t),g=r(y,1)[0],m=(0,o.useRef)(),b=(0,o.useState)("100%"),_=r(b,2),E=_[0],w=_[1],O=(0,o.useRef)(!0);(0,o.useEffect)((function(){return function(){O.current=!1}}),[]),(0,o.useEffect)((function(){!i&&g&&p((0,l.tipShown)(t))}),[g,i,t,p,h]),(0,o.useLayoutEffect)((function(){if(m.current&&h&&O.current){var e=m.current.clientHeight;e>0&&w(e/2)}}),[h]);var S=i&&a.default.createElement(u.default,{onEnter:function(){f((0,l.tipShown)(t))},topOffset:0,bottomOffset:E},a.default.createElement("div",null,n))||null,x=a.default.createElement(o.Fragment,null," ",n," ");return a.default.createElement("div",{ref:m},i?S:x)};h.propTypes=p,h.defaultProps=v,t.default=h},922:function(e,t){const n=/^[0-9]+$/,r=(e,t)=>{const r=n.test(e),o=n.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},923:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>0===r(e,t,n)},924:function(e,t,n){const r=n(125);e.exports=(e,t,n)=>{const o=new r(e,n),a=new r(t,n);return o.compare(a)||o.compareBuild(a)}},925:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>r(e,t,n)<0},926:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>r(e,t,n)>=0},927:function(e,t,n){const r=n(211);e.exports=(e,t,n)=>r(e,t,n)<=0},928:function(e,t,n){const r=Symbol("SemVer ANY");class o{static get ANY(){return r}constructor(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}s("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===r?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(e){const t=this.options.loose?a[i.COMPARATORLOOSE]:a[i.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new c(n[2],this.options.loose):this.semver=r}toString(){return this.value}test(e){if(s("Comparator.test",e,this.options.loose),this.semver===r||e===r)return!0;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}return u(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new l(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new l(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),a=this.semver.version===e.semver.version,i=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=u(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=u(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||a&&i||s||c}}e.exports=o;const{re:a,t:i}=n(321),u=n(1315),s=n(508),c=n(125),l=n(182)},929:function(e,t,n){const r=n(125),o=n(928),{ANY:a}=o,i=n(182),u=n(1316),s=n(509),c=n(925),l=n(927),d=n(926);e.exports=(e,t,n,f)=>{let p,v,h,y,g;switch(e=new r(e,f),t=new i(t,f),n){case">":p=s,v=l,h=c,y=">",g=">=";break;case"<":p=c,v=d,h=s,y="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(u(e,t,f))return!1;for(let n=0;n<t.set.length;++n){const r=t.set[n];let i=null,u=null;if(r.forEach(e=>{e.semver===a&&(e=new o(">=0.0.0")),i=i||e,u=u||e,p(e.semver,i.semver,f)?i=e:h(e.semver,u.semver,f)&&(u=e)}),i.operator===y||i.operator===g)return!1;if((!u.operator||u.operator===y)&&v(e,u.semver))return!1;if(u.operator===g&&h(e,u.semver))return!1}return!0}}});